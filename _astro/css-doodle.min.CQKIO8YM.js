/*! css-doodle v0.42.5 MIT licensed */
(()=>{var Jr=[":",";",",","(",")","[","]","{","}","\u03C0","\xB1","+","-","*","/","%",'"',"'","`","@","=","^","\xDF","_"],y={escape:e=>e=="\\",space:e=>/[\r\n\t\s]/.test(e),digit:e=>/^[0-9]$/.test(e),sign:e=>/^[+-]$/.test(e),dot:e=>e==".",quote:e=>/^["'`]$/.test(e),symbol:e=>Jr.includes(e),hexNum:e=>/^[0-9a-f]$/i.test(e),hex:(e,t,r)=>e=="0"&&y.letter(t,"x")&&y.hexNum(r),expWithSign:(e,t,r)=>y.letter(e,"e")&&y.sign(t)&&y.digit(r),exp:(e,t)=>y.letter(e,"e")&&y.digit(t),dots:(e,t)=>y.dot(e)&&y.dot(t),letter:(e,t)=>String(e).toLowerCase()==String(t).toLowerCase(),comment:(e,t)=>e=="/"&&t=="*",inlineComment:(e,t)=>e=="/"&&t==="/",selfClosedTag:(e,t)=>e=="/"&&t==">",closedTag:(e,t)=>e=="<"&&t=="/"},D=class{constructor({type:t,value:r,pos:i,status:s}){this.type=t,this.value=r,this.pos=i,s&&(this.status=s)}isSymbol(t){return arguments.length==0?this.type=="Symbol":(arguments.length>1&&(t=Array.from(arguments)),Array.isArray(t)?t.some(r=>r===this.value):t===this.value)}isSpace(){return this.type=="Space"}isNumber(){return this.type=="Number"}isWord(){return this.type=="Word"}};function j(e){let t=-1,r=e.length,i=-1,s=0;return{curr(n=0){return e[t+n]},next(n=1){let a=e[t+=n];return a===``?(s++,i=0):i+=n,a},end(){return t>=r},get(){return{prev:e[t-1],curr:e[t+0],next:e[t+1],next2:e[t+2],next3:e[t+3],pos:[i,s]}}}}function ei(e){for(;e.next();){let{curr:t,prev:r}=e.get();if(y.comment(t,r))break}}function ti(e){for(;e.next()&&e.curr()!==``;);}function Ft(e){return[":",";",",","{","}","(",")","[","]"].includes(e)}function Ht(e){let t="";for(;!e.end();){let{curr:r,next:i}=e.get();t+=r;let s=y.symbol(i)||y.space(i)||y.digit(i);if(t.length&&s&&!y.closedTag(r,i))break;e.next()}return t.trim()}function ri(e){let t="";for(;!e.end();){let{curr:r,next:i}=e.get();if(t+=r,!y.space(i))break;e.next()}return t}function Yt(e){let t="",r=!1;for(;!e.end();){let{curr:i,next:s,next2:n,next3:a}=e.get();if(t+=i,r&&y.dot(s)||(y.dot(i)&&(r=!0),y.dots(s,n)))break;if(y.expWithSign(s,n,a))t+=e.next()+e.next();else if(y.exp(s,n))t+=e.next();else if(!y.digit(s)&&!y.dot(s))break;e.next()}return t}function ii(e){let t="0x";for(e.next(2);!e.end();){let{curr:r,next:i}=e.get();if(t+=r,!y.hexNum(i))break;e.next()}return t}function We(e){return e[e.length-1]}function T(e,t={}){let r=j(String(e).trim()),i=[],s=[];for(;r.next();){let{prev:a,curr:l,next:u,next2:o,pos:f}=r.get();if(y.comment(l,u))ei(r);else if(t.ignoreInlineComment&&y.inlineComment(l,u))ti(r);else if(y.hex(l,u,o)){let c=ii(r);i.push(new D({type:"Number",value:c,pos:f}))}else if(y.digit(l)||y.digit(u)&&y.dot(l)&&!y.dots(a,l)){let c=Yt(r);i.push(new D({type:"Number",value:c,pos:f}))}else if(y.symbol(l)&&!y.selfClosedTag(l,u)){let c=We(i),p=y.digit(u)||y.dot(u)&&y.digit(o);if(l==="-"&&p&&(!c||!c.isNumber())){let h=Yt(r);i.push(new D({type:"Number",value:h,pos:f}));continue}let m={type:"Symbol",value:l,pos:f};if(s.length&&y.escape(c.value)){i.pop();let h=Ht(r);h.length&&i.push(new D({type:"Word",value:h,pos:f}))}else y.quote(l)&&(We(s)==l?(s.pop(),m.status="close"):(s.push(l),m.status="open")),i.push(new D(m))}else if(y.space(l)){let c=ri(r),p=We(i),{next:m}=r.get();if(!s.length&&p){let h=p.value,d=Ft(h)&&h!==")",v=Ft(m)&&m!=="(";if(d||v)continue;c=t.preserveLineBreak?l:" "}i.length&&m&&m.trim()&&i.push(new D({type:"Space",value:c,pos:f}))}else{let c=Ht(r);c.length&&i.push(new D({type:"Word",value:c,pos:f}))}}let n=We(i);return n&&n.isSpace()&&(i.length=i.length-1),i}function si(e){let t=j(T(e));return Gt(t)}function Gt(e){let t=[];for(;e.next();){let{curr:r,next:i}=e.get();if(r.value==="var"){if(i&&i.isSymbol("(")){e.next();let s=ni(e);li(s.name)&&t.push(s)}}else if(t.length&&!r.isSymbol(","))break}return t}function ni(e){let t={},r=[];for(;e.next();){let{curr:i,next:s}=e.get();if(i.isSymbol(")",";")&&!t.name){t.name=Vt(r);break}else i.isSymbol(",")?(t.name===void 0&&(t.name=Vt(r),r=[]),t.name&&(t.fallback=Gt(e))):r.push(i)}return t}function Vt(e){return e.map(t=>t.value).join("")}function li(e){return!(e===void 0||e.length<=2||e.substr(2).startsWith("-")||!e.startsWith("--"))}var Zt=si;function R(e,t,r){return e=Number(e)||0,Math.max(t,Math.min(r,e))}function oe(e,t){for(let[r,i]of Object.entries(t))e[r]=e[i];return e}function Ue(e){return/^[a-zA-Z]$/.test(e)}function w(e){return e==null}function ue(e){return w(e)||Number.isNaN(e)}function C(e){return w(e)||e===""}function K(e){let t=r=>(...i)=>e(r,...i);return t.lazy=!0,t}function Kt(e,t){let[r,i=1]=String(e).split(/[x-]/),[s,n]=[Math.ceil(r),Math.ceil(i)];ue(s)&&(s=1),ue(n)&&(n=1),r=R(s,0,65536),i=R(n,0,65536);let a=r*i,l=[],u=1;if(/x/.test(e))for(let o=1;o<=i;++o)for(let f=1;f<=r;++f)l.push(t(u,f,o,a,r,i,u)),u++;else if(/-/.test(e))if(a=Math.abs(r-i)+1,r<=i)for(let o=r;o<=i;++o)l.push(t(o,o,1,a,a,1,u++));else for(let o=r;o>=i;--o)l.push(t(o,o,1,a,a,1,u++));else for(let o=1;o<=r;++o)l.push(t(o,o,1,r,r,1,u++));return l}function X(e,t,r){return"c-"+e+"-"+t+"-"+r}function E(e){let t=e;for(;t&&!w(t.value);)t=t.value;return t??""}function Qt(e){return(w(e)?Date.now():String(e).replace(/\/.png$/g,""))+".png"}function ve(e,t,r=0){let i=new Image;i.crossOrigin="anonymous",i.src=e,i.onload=function(){setTimeout(t,r)}}function _e(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function ft(e){let t=document.createElement("textarea");return t.innerHTML=e,t.value}function Jt(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function ye(e,t=0){e=String(e);let r=3735928559^t,i=1103547991^t;for(let s=0,n;s<e.length;s++)n=e.charCodeAt(s),r=Math.imul(r^n,2654435761),i=Math.imul(i^n,1597334677);return r=Math.imul(r^r>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),4294967296*(2097151&i)+(r>>>0)}function er(){let e=0;return(t="")=>`${t}-${++e}`}function qe(e,t,r){return t+e*(r-t)}function fe(e=""){return e+Math.random().toString(32).substr(2)}function xe(e){return w(e)?[]:Array.isArray(e)?e:[e]}function be(e,t=``){return(e||[]).join(t)}function x(e,t=1){return w(e)?"":e[e.length-t]}function ct(e){return e[0]}function tr(e){return e.filter(t=>!w(t)&&String(t).trim().length)}function ai(e,t={symbol:",",noSpace:!1,verbose:!1}){let r=[],i=!1,s=[],n=[],a=[],l="",u=t.symbol||",",o={},f={},c=[];if(C(e))return r;Array.isArray(u)||(u=[u]),u.forEach(g=>{let[_,$=1/0]=String(g).split(/\s+/);o[_]=0,f[_]=$});let p=Object.keys(f),m=j(T(e));h();function h(){c=p.filter(g=>o[g]<f[g])}function d(g){return t.noSpace?g.isSymbol(c):g.isSymbol(c)||g.isSpace()}function v(g){let _=ui(g);t.verbose?(l.length||_.length)&&r.push({group:l,value:_}):r.push(_)}for(;m.next();){let{prev:g,curr:_,next:$}=m.get();_.isSymbol("(")&&n.push(_.value),_.isSymbol(")")&&n.pop(),_.status==="open"&&a.push(_.value),_.status==="close"&&a.pop();let A=!n.length&&!a.length;if(A){let k=t.noSpace&&_.isSpace()&&d($),N=t.noSpace&&_.isSpace()&&d(g);if(_.isSpace()&&!s.length||k||N)continue}if(A&&d(_)){o[_.value]+=1;let k=l;v(s),l=_.value,s=[],h()}else s.push(_)}return s.length&&v(s),r}function ui(e){return e.map(t=>t.value).join("")}var S=ai;function oi(e,t){let r=[],i,s=[],n=[],a=!1;for(;e.next();){let{curr:l,next:u}=e.get();l.isSymbol("(")&&!s.length?n.push(l):l.isSymbol(")")&&!s.length&&n.pop(),l.isSymbol("'",'"')&&(l.status==="open"?s.push(l):s.pop());let o=!s.length&&!n.length&&(!u||l.isSymbol(";")||u.isSymbol("}"));if(l.isSymbol("'",'"')&&u&&u.isSymbol("}")&&!s.length&&(o=!0),!n.length&&!s.length&&l.isSymbol("{")){let f=rr(r);if(!f.length)continue;let c=f.pop(),p=ht(...f,c);for(i=Xe(mt(e,Fe(c,{type:"block",name:c,value:[]})),p);c=f.pop();)i=Xe(Fe(c,{type:"block",name:c,value:[i]}),p);a=!0;break}if(r.push(l),o)break}return r.length&&!i?(t._valueTokens=r,t.value=we(r)):i&&(t.value=i),a&&(t.value.inline=!0),t.origin&&(t.origin.value=t.value),t}function fi(e){let t=[],r=[];for(;e.next();){let{curr:i}=e.get();if(i.isSymbol("{"))t.push(i.value);else if(i.isSymbol("}"))if(t.length)t.pop();else break;r.push(i.value)}return r.join("")}function mt(e,t){let r=[],i=[],s=t&&t.type||"",n=[];for(;e.next();){let{prev:a,curr:l,next:u}=e.get();l.isSymbol("(")&&n.push(l.value),l.isSymbol(")")&&n.pop();let o=!u||l.isSymbol("}");if(pt(s)&&o){!u&&r.length&&!l.isSymbol("}")&&typeof r[r.length-1].value=="string"&&(r[r.length-1].value+=";"+l.value),t.value=r;break}else if(l.isSymbol("{")){let f=rr(i);if(!f.length)continue;ht(t.name)&&(f=[we(i)]);let c=f.pop(),p=ht(...f,t.name,c);if(c==="style")r.push({type:"block",name:c,value:fi(e)});else{let m=Xe(mt(e,Fe(c,{type:"block",name:c,value:[]})),p);for(;c=f.pop();)m=Xe(Fe(c,{type:"block",name:c,value:[m]}),p);r.push(m)}i=[]}else if(l.isSymbol(":")&&!n.length&&!ci(a,u)&&i.length){let f=pi(i,d=>d.isSymbol(",")),c={type:"statement",name:"unkown",value:""};f.length>1&&(c.origin={name:f});let p=oi(e,c),m=S(p.value),h=f.length>1&&m.length===f.length;f.forEach((d,v)=>{let g=Object.assign({},p,{name:d});/^\-\-/.test(d)&&(g.variable=!0),h&&(g.value=m[v]),/viewBox/i.test(d)&&(g.detail=hi(g.value,g._valueTokens)),delete g._valueTokens,r.push(g)}),pt(s)&&(t.value=r),i=[]}else l.isSymbol(";")?r.length&&i.length&&(r[r.length-1].value+=";"+we(i),i=[]):i.push(l)}return r.length&&pt(s)&&(t.value=r),s?t:r}function ci(e,t){let r=["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],i=e&&e.value,s=t&&t.value;return r.includes(i+":"+s)}function we(e){return e.filter((t,r)=>!(t.isSymbol(";","}")&&r===e.length-1)).map(t=>t.value).join("")}function Xe(e,t){let r=e.name||"",[i,...s]=r.split(/#/),n=s[s.length-1];return i&&n&&!t&&(e.name=i,e.value.push({type:"statement",name:"id",value:n})),e}function pi(e,t){let r=[],i=[];return e.forEach(s=>{t(s)?(r.push(we(i)),i=[]):i.push(s)}),i.length&&r.push(we(i)),r}function rr(e){let t=[],r=j(e),i=[],s;for(;r.next();){let{prev:n,curr:a,next:l}=r.get(),u=n&&l&&a.value==="x"&&n.isNumber()&&l.isNumber();a.isWord()&&!s&&!u?t.push(a.value.trim()):t[t.length-1]=(t[t.length-1]+a.value).trim(),a.isSymbol()?s=!0:a.isSpace()||(s=!1)}return t}function hi(e,t){let r={value:[]},i;if(!Array.isArray(t))return r;for(let s of t)s.isSpace()||s.isSymbol(",",";")||(r.value.length<4&&s.isNumber()?r.value.push(Number(s.value)):s.isNumber()&&i?(r[i]=Number(s.value),i=null):s.isWord()&&(i=s.value));return r}function Fe(e,t){let r=Object.assign({},t);if(/\*\s*[0-9]/.test(e)){let[i,s]=e.split("*");s&&(r.times=s.trim(),r.pureName=i.trim())}return r}function ht(...e){return e.some(t=>t==="style")}function pt(e){return e==="block"}function mi(e){let t,r=[];for(let i of e.value)i.name==="svg"&&(t=i),i.variable&&r.push(i);if(t&&Array.isArray(t.value)){for(let i of r)t.value.find(s=>s.name==i.name)||t.value.unshift(i);return t}return e}function di(e,t){let r=j(T(e)),i=mt(r,t||{type:"block",name:"svg",value:[]});return mi(i)}var Q=di;function dt(e,t){let r="";if(e.type==="block"){let i=Array.isArray(e.value)&&e.value[0]&&e.value[0].inline;if(e.times?r+="@M"+e.times+"("+e.pureName+"{":r+=e.name+"{",e.name==="style")r+=e.value;else if(Array.isArray(e.value)&&e.value.length){let s="";for(let n of e.value)r+=dt(n,s),n.origin&&(s=n.origin.name.join(","))}e.times?r+="})":i||(r+="}")}else if(e.type==="statement"){let i=e.origin&&t===e.origin.name.join(","),s=e.origin?e.origin.name.join(","):e.name,n=e.origin?e.origin.value:e.value;i||(r+=n&&n.type?s+":"+dt(n):s+":"+n+";")}return r}function gt(e){return dt(e).trim()}var z={func(e=""){return{type:"func",name:e,arguments:[]}},argument(){return{type:"argument",value:[]}},text(e=""){return{type:"text",value:e}},pseudo(e=""){return{type:"pseudo",selector:e,styles:[]}},cond(e=""){return{type:"cond",name:e,styles:[],arguments:[]}},rule(e=""){return{type:"rule",property:e,value:[]}},keyframes(e=""){return{type:"keyframes",name:e,steps:[]}},step(e=""){return{type:"step",name:e,styles:[]}}},P={white_space(e){return/[\s\n\t]/.test(e)},line_break(e){return/\n/.test(e)},number(e){return!isNaN(e)},pair(e){return['"',"(",")","'"].includes(e)},pair_of(e,t){return{'"':'"',"'":"'","(":")"}[e]==t},selector(e){let t=e.index(),r,i=[],s=[],n=!1;for(;!e.end();){if(r=e.next(),r==='"'||r==="'"||r==="`"){let a=x(s);r===a?s.pop():s.length||s.push(r)}if(r=="("&&i.push(r),r==")"&&i.pop(),!i.length&&!s.length){if(r==="{"){n=!0;break}if(r===";"||r==="}"){n=!1;break}}}return e.index(t),n}},He={\u03C0:Math.PI,"\u220F":Math.PI};function ir(e){return/^@(canvas|shaders|doodle)/.test(e)}function nr(e=""){let t=0,r=1,i=1;return{curr(s=0){return e[t+s]},end(){return e.length<=t},info(){return{index:t,col:r,line:i}},index(s){return s===void 0?t:t=s},range(s,n){return e.substring(s,n)},next(){let s=e[t++];return s==``?(i++,r=0):r++,s}}}function gi(e,{col:t,line:r}){console.warn(`(at line ${r}, column ${t}) ${e}`)}function vi(e){return e.trim().length?P.number(+e)?+e:e.trim():e}function yt(e,t){return function(r,i){let s=r.index(),n="";for(;!r.end();){let a=r.next();if(e(a)){t&&(n+=a);break}else n+=a}return i&&r.index(s),n}}function lr(e,t){return yt(i=>/[^\w@]/.test(i))(e,t)}function _i(e){return yt(t=>/[\s\{]/.test(t))(e)}function yi(e,t){return yt(i=>P.line_break(i)||i=="{",!0)(e,t)}function xi(e,t){let r,i=z.step();for(;!e.end()&&(r=e.curr())!="}";){if(P.white_space(r)){e.next();continue}else if(!i.name.length)i.name=xt(e,s=>s==="{");else if(i.styles.push(Ve(e,t)),e.curr()=="}")break;e.next()}return i}function bi(e,t){let r=[],i;for(;!e.end()&&(i=e.curr())!="}";){if(P.white_space(i)){e.next();continue}else r.push(xi(e,t));e.next()}return r}function wi(e,t){let r=z.keyframes(),i;for(;!e.end()&&(i=e.curr())!="}";){if(r.name.length){if(i=="{"||e.curr(-1)=="{"){e.next(),r.steps=bi(e,t);break}}else{if(lr(e),r.name=_i(e),!r.name.length){gi("missing keyframes name",e.info());break}continue}e.next()}return r}function Ye(e,t={}){for(e.next();!e.end();){let r=e.curr();if(t.inline){if(r==``)break}else if((r=e.curr())=="*"&&e.curr(1)=="/")break;e.next()}t.inline||(e.next(),e.next())}function $i(e){for(e.next();!e.end()&&e.curr()!=">";)e.next()}function Si(e){let t="",r;for(;!e.end()&&(r=e.curr())!=":";)P.white_space(r)||(t+=r),e.next();return t}function _t(e,t,r,i={}){let s=[],n=[],a=[],l="",u,o="";for(;!e.end();){u=e.curr();let f=e.curr(-1),c=e.index();if(/[\('"`]/.test(u)&&f!=="\\")a.length&&u!=="("&&u===x(a)?a.pop():a.push(u),l+=u;else if(!r&&(u=="@"||u==="$"||f==="."&&t))n.length||(l=l.trimLeft()),l.length&&(n.push(z.text(l)),l=""),n.push(ar(e,i));else if(r&&/[)]/.test(u)||!r&&/[,)]/.test(u))if(a.length)u==")"&&x(a)==="("&&a.pop(),l+=u;else{if(l.length&&(n.length?/\S/.test(l)&&n.push(z.text(l)):n.push(z.text(vi(l))),l.trim().startsWith("\xB1")&&!r)){let p=l.trim().substr(1),m=structuredClone(n);x(m).value="-"+p,s.push(vt(m)),x(n).value=p}if(s.push(vt(n)),[n,l]=[[],""],u==")")break}else He[u]&&!/[0-9]/.test(e.curr(-1))&&(u=He[u]),l+=u;if(t&&(e.curr(1)==")"||e.curr(1)==";"||!/[0-9a-zA-Z_\-.]/.test(e.curr()))&&!a.length){n.length&&s.push(vt(n));break}else o+=e.range(c,e.index()+1),e.next()}return[ki(s),o]}function ki(e){let t=x(e[0]);return t&&t.type==="text"&&!String(t.value).trim().length&&(e[0]=e[0].slice(0,-1)),e}function vt(e){let t=e.map(s=>{if(s.type=="text"&&typeof s.value=="string"){let n=String(s.value);n.includes("`")&&(s.value=n=n.replace(/`/g,'"')),s.value=n}return s}),r=ct(t)||{},i=x(t)||{};if(r.type=="text"&&i.type=="text"){let s=ct(r.value),n=x(i.value);typeof r.value=="string"&&typeof i.value=="string"&&P.pair_of(s,n)&&(r.value=r.value.slice(1),i.value=i.value.slice(0,i.value.length-1),t.cluster=!0)}return t}function ji(e){let t="",r="";if(/\D$/.test(e)&&!/\d+[x-]\d+/.test(e)||Math[e.substr(1)])return{fname:e,extra:r};for(let i=e.length-1;i>=0;i--){let s=e[i],n=e[i-1],a=e[i+1];if(/[\d.]/.test(s)||(s=="x"||s=="-")&&/\d/.test(n)&&/\d/.test(a))r=s+r;else{t=e.substring(0,i+1);break}}return{fname:t,extra:r}}function Ni(e){let t=JSON.stringify(e);return t.includes("pureName")&&t.includes("times")}function Ei(e){return/^@svg$/i.test(e)}function ar(e,t={}){let r=z.func(),i=e.curr(),s,n=!1,a=i==="$";for(i==="@"?e.next():i="@";!e.end();){s=e.curr();let o=e.curr(1),f=s=="."&&/[a-zA-Z@$]/.test(o);if(s=="("||f){n=!0,e.next();let[c,p]=_t(e,f,ir(i),t);if(Ei(i)){let m=Q(p),h=0;for(let d of m.value)d.variable&&(t[d.name]=F(`${``.repeat(h++)} ${d.name}:${d.value}`)[0].value);if(/\d\s*{/.test(p)&&Ni(m)){let d=gt(m);d+=")",c=_t(nr(d),f,ir(i),t)[0]}}r.arguments=c,r.variables=t;break}else/[0-9a-zA-Z_\-.%]/.test(s)&&(i+=s);if(!n&&o!=="("&&!/[0-9a-zA-Z_\-.%]/.test(o))break;e.next()}let{fname:l,extra:u}=ji(i);if(r.name=a?"@$"+i.substr(1):l,u.length&&r.arguments.unshift([{type:"text",value:u}]),a&&r.name.length>2){if(!r.arguments.length){let o=r.name.substring(0,2),f=r.name.substring(2);r.name=o,r.arguments.push([{type:"text",value:f}])}if(/\d$/.test(r.name)){let o=r.name.substring(0,2),f=r.name.substring(2);r.name=o,r.arguments[0][0].value=f}}return r.position=e.info().index,r}function xt(e,t=()=>{}){let r=z.text(),i=0,s=!0,n,a=[];a[i]=[];let l=[],u=[];for(;!e.end();){if(n=e.curr(),s&&P.white_space(n)){e.next();continue}else s=!1;if(n==``&&!P.white_space(e.curr(-1)))r.value+=" ";else if(n==","&&!l.length)r.value.length&&(a[i].push(r),r=z.text()),a[++i]=[],s=!0;else if((/[;}<]/.test(n)||t(n))&&!u.length){r.value.length&&(a[i].push(r),r=z.text());break}else if((n==="@"||n==="$")&&/[\w-\(%]/.test(e.curr(1)))r.value.length&&(a[i].push(r),r=z.text()),a[i].push(ar(e));else if(n==='"'||n==="'"){let f=x(u);n===f?u.pop():u.length||u.push(n),r.value+=n}else(!P.white_space(n)||!P.white_space(e.curr(-1)))&&(n=="("&&l.push(n),n==")"&&l.pop(),He[n]&&!/[0-9]/.test(e.curr(-1))&&(n=He[n]),r.value+=n);let o=e.curr();if((o===";"||o=="}"||t(o))&&!u.length)break;e.next()}return r.value.length&&a[i].push(r),a}function Ti(e){let t="",r;for(;!e.end()&&(r=e.curr())!="{";)t+=r,e.next();return t=t.trim(),t}function Ai(e){let t="",r,i=[],s={};for(;!e.end()&&!/[){]/.test(r);){if((r=e.curr())=="("){t&&(s.name?i.push({keyword:t}):s.name=t,t=""),e.next();let l=_t(e)[0];i.push({arguments:l})}else P.white_space(r)?P.white_space(r)&&!s.name?(s.name=t,t=""):P.white_space(r)&&t.length&&(i.push({keyword:t}),t=""):t+=r;e.next()}let[n,...a]=(s.name||"").trim().split(/\s+/);return s.name=n,s.addition=a,s.segments=i,s}function ur(e,t){let r=z.pseudo(),i;for(;!e.end();){if(i=e.curr(),i=="/"&&e.curr(1)=="*")Ye(e);else{if(i=="}")break;if(P.white_space(i)){e.next();continue}else if(!r.selector)r.selector=Ti(e);else{let s=Ve(e,t);if(s.property=="@use"?r.styles=r.styles.concat(s.value):s.property&&r.styles.push(s),e.curr()=="}")break}}e.next()}return r}function Ve(e,t){let r=z.rule(),i,s=e.index();for(;!e.end();){if(i=e.curr(),i=="/"&&e.curr(1)=="*")Ye(e);else{if(i==";")break;if(r.property.length){r.value=xt(e);break}else if(r.property=Si(e),r.property=="@use"){r.value=Pi(e,t);break}}e.next()}let n=e.index();return r.raw=()=>e.range(s,n).trim(),r}function or(e,t){let r=z.cond(),i;for(;!e.end();){if(i=e.curr(),i=="/"&&e.curr(1)=="*")Ye(e);else{if(i=="}")break;if(!r.name.length)Object.assign(r,Ai(e));else if(i==":"){let s=ur(e);s.selector&&r.styles.push(s)}else if(i=="@"&&!yi(e,!0).includes(":"))r.styles.push(or(e));else if(!P.white_space(i)){let s=Ve(e,t);if(s.property&&r.styles.push(s),e.curr()=="}")break}}e.next()}return r}function sr(e,t){let r="";return e&&e.get_variable&&(r=e.get_variable(t)),r}function fr(e,t){e.forEach&&e.forEach(r=>{if(r.type=="text"&&r.value){let i=Zt(r.value);r.value=i.reduce((s,n)=>{let a="",l="",u;a=sr(t,n.name),!a&&n.fallback&&n.fallback.every(o=>{if(l=sr(t,o.name),l)return a=l,!1});try{u=F(a,t)}catch{}return u&&s.push.apply(s,u),s},[])}r.type=="func"&&r.arguments&&r.arguments.forEach(i=>{fr(i,t)})})}function Pi(e,t){return e.next(),(xt(e)||[]).reduce((i,s)=>{fr(s,t);let[n]=s;return n.value&&n.value.length&&i.push(...n.value),i},[])}function F(e,t){let r=nr(e),i=[];for(;!r.end();){let s=r.curr();if(P.white_space(s)){r.next();continue}else if(s=="/"&&r.curr(1)=="*")Ye(r);else if(s==":"){let n=ur(r,t);n.selector&&i.push(n)}else if(s=="@"&&lr(r,!0)==="@keyframes"){let n=wi(r,t);i.push(n)}else if(s=="<")$i(r);else if(P.selector(r)){let n=or(r,t);n.name.length&&i.push(n)}else if(!P.white_space(s)){let n=Ve(r,t);n.property&&i.push(n)}r.next()}return i}function W(e,t=64){let[r,i,s]=[1,t,t*t],[n,a,l]=(e+"").replace(/\s+/g,"").replace(/[,ï¼ŒxX]+/g,"x").split("x").map(c=>parseInt(c)),u=n==1||a==1?s:i,o=n==1&&a==1?s:r,f={x:R(n||r,1,u),y:R(a||n||r,1,u),z:R(l||r,1,o)};return Object.assign({},f,{count:f.x*f.y*f.z,ratio:f.x/f.y})}function Ri(e){let r=j(pr(T(e,{preserveLineBreak:!0,ignoreInlineComment:!0}))),i=[],s=[],n,a,l={textures:[]};for(;r.next();){let{curr:u,next:o}=r.get();if(u.isSymbol("{")){if(i.length)s.push(u);else{let f=bt(s);Ci(f)?(n=f,s=[]):s.push(u)}i.push("{")}else if(u.isSymbol("}"))if(i.pop(),!i.length&&n){let f=bt(s);n&&f.length&&(n.startsWith("texture")?l.textures.push({name:n,value:f}):l[n]=f,s=[]),n=null}else s.push(u);else!C(a)&&a!=u.pos[1]&&(s.push(cr()),a=null),(!n||!n.startsWith("texture"))&&u.isWord()&&u.value.startsWith("#")&&(s.push(cr()),a=o.pos[1]),s.push(u)}return C(l.fragment)&&(l.fragment=bt(s),l.textures=l.textures||[]),l}function Ci(e){return/^texture\w*$|^(fragment|vertex)$/.test(e)}function cr(){return new D({type:"LineBreak",value:``})}function pr(e){let t=e[0],r=e[e.length-1];for(;t&&t.isSymbol("(")&&r&&r.isSymbol(")");)e=e.slice(1,e.length-1),t=e[0],r=e[e.length-1];return e}function bt(e){return pr(e).map(t=>t.value).join("")}var hr=Ri;var Ii="MmLlHhVvCcSsQqTtAaZz",zi="mlhvcsqtaz";function Mi(e){let t=j(T(e)),r={},i={commands:[],valid:!0};for(;t.next();){let{curr:s}=t.get();if(!(s.isSpace()||s.isSymbol(",")))if(s.isWord())r.name&&(i.commands.push(r),r={}),r.name=s.value,r.value=[],Ii.includes(s.value)?zi.includes(s.value)?r.type="relative":r.type="absolute":(r.type="unknown",i.valid=!1);else if(r.value){let n=s.value;s.isNumber()&&(n=Number(s.value)),r.value.push(n)}else r.name||(i.valid=!1)}return r.name&&i.commands.push(r),i}var $e=Mi;function Oi(e){let t=j(T(e)),r={},i=!1;for(;t.next();){let{prev:s,curr:n,next:a}=t.get(),l=i&&(n.isWord()||n.isSymbol())&&s&&s.isNumber()&&!a;if(n.isNumber())r.value=Number(n.value),i=!0;else if(l)r.unit=n.value;else break}return r}var H=Oi;var J='xmlns="http://www.w3.org/2000/svg"',wt='xmlns="http://www.w3.org/1999/xhtml"',Ge='xmlns:xlink="http://www.w3.org/1999/xlink"';function Se(e,t){return`url("data:image/svg+xml;utf8,${encodeURIComponent(e)+(t?`#${t}`:"")}")`}function $t(e){return e.includes("<svg")||(e=`<svg ${J} ${Ge}>${e}</svg>`),e.includes("xmlns")||(e=e.replace(/<svg([\s>])/,`<svg ${J} ${Ge}$1`)),e}var Bi=er(),ee=class{constructor(t,r=""){if(!t)throw new Error("Tag name is required");this.id=Symbol(),this.name=t,this.body=[],this.attrs={},this.isTextNode()&&(this.body=r)}isTextNode(){return this.name==="text-node"}find(t){let r=t.attrs.id,i=t.name;if(Array.isArray(this.body)&&r!==void 0)return this.body.find(s=>s.attrs.id===r&&s.name===i)}findSpareDefs(){return this.body.find(t=>t.name==="defs"&&!t.attrs.id)}append(t){Array.isArray(t)||(t=[t]);for(let r of t)this.isTextNode()||this.body.push(r)}merge(t){for(let[r,i]of Object.entries(t.attrs))this.attrs[r]=i;Array.isArray(t.body)&&this.body.push(...t.body)}attr(t,r){if(!this.isTextNode())return r===void 0?this.attrs[t]:this.attrs[t]=r}toString(){if(this.isTextNode())return mr(this.body);let t=[""],r=[];for(let[s,n]of Object.entries(this.attrs))n=mr(n),t.push(`${s}="${n}"`);for(let s of this.body)r.push(s.toString());return r.join("").length||/svg/i.test(this.name)?`<${this.name}${t.join(" ")}>${r.join("")}</${this.name}>`:`<${this.name}${t.join(" ")}/>`}};function Li(e,t){return`${e}:${t};`}function mr(e){e=String(e);let t=e.startsWith('"')&&e.endsWith('"'),r=e.startsWith("'")&&e.endsWith("'");return t||r?e.substring(1,e.length-1):e}function Di(e){let t=e.detail.value,r=e.detail.padding||e.detail.p||e.detail.expand;if(!t.length)return"";let[i,s,n,a]=t;return r&&([i,s,n,a]=[i-r,s-r,n+r*2,a+r*2]),`${i} ${s} ${n} ${a}`}function Wi(e){return e==="path"||e==="line"||e==="circle"||e==="ellipse"||e==="rect"||e==="polygon"||e==="polyline"}function St(e,t,r,i){let s;if(t||(t=new ee("root")),e.type==="block")if(e.name==="style"){let n=new ee("style");n.append(e.value),t.append(n)}else{let n=new ee(e.name);if(i||(i=n,i.attr("xmlns",J.split("=")[1])),e.name==="defs"){let f=i.findSpareDefs();f&&(n=f)}for(let f of e.value){e.parent=r;let c=St(f,n,e,i);c&&(s=c)}let a=e&&e.inline&&e.name!=="defs",l=r&&r.inline&&r.name==="defs",u=l&&r.value.length==1;if(a||l){let f=e.value.find(c=>c.type==="statement"&&c.name==="id");f?s=f.value:(u||a)&&(s=Bi(e.name),n.attr("id",s))}let o=t.find(n);if(o)o.merge(n);else if(e.name==="defs"){let f=i.findSpareDefs();f&&!n.attrs.id?n.id!==f.id&&f.append(n.body):i.append(n)}else t.append(n)}if(e.type==="statement"&&!e.variable)if(e.name==="content"){let n=new ee("text-node",e.value);t.append(n)}else if(e.name.startsWith("style ")){let n=(e.name.split("style ")[1]||"").trim();if(n.length){let a=t.attr("style")||"";t.attr("style",a+Li(n,e.value))}}else{let n=e.value;if(n&&n.type==="block"){let a=St(e.value,i,e,i);w(a)?n="":(n=`url(#${a})`,(e.name==="xlink:href"||e.name==="href")&&(n=`#${a}`))}if(/viewBox/i.test(e.name))n=Di(e,n),n&&t.attr(e.name,n);else if((e.name==="draw"||e.name==="animate")&&Wi(r&&r.name)){let[a,l]=String(n).split(/\s+/);(a==="indefinite"||a==="infinite"||/\d$/.test(a))&&([a,l]=[l,a]),l==="infinite"&&(l="indefinite"),t.attr("stroke-dasharray",10),t.attr("pathLength",10);let u=new ee("animate");u.attr("attributeName","stroke-dashoffset"),u.attr("from",10),u.attr("to",0),u.attr("dur",a),l&&u.attr("repeatCount",l),t.append(u)}else t.attr(e.name,n);e.name.includes("xlink:")&&i.attr("xmlns:xlink",Ge.split("=")[1])}return r?s:i.toString()}function ce(e){return St(e)}var Ui=["auto","reverse"],qi=["deg","rad","grad","turn"];function Xi(e){let t=j(T(e)),r=!1,i="",s={direction:"",angle:""};for(;t.next();){let{prev:n,curr:a,next:l}=t.get();if(a.isWord()&&Ui.includes(a.value))s.direction=a.value,r=!0;else if(a.isNumber())s.angle=Number(a.value),r=!0;else if(a.isWord()&&n&&n.isNumber()&&qi.includes(a.value))i=a.value;else if(a.isSpace()&&s.direction!==""&&s.angle!=="")break}return r||(s.direction="auto"),Fi(s,i)}function Fi(e,t){let{angle:r}=e;return r===""&&(r=0),t==="rad"&&(r/=Math.PI/180),t==="grad"&&(r*=.9),t==="turn"&&(r*=360),Object.assign({},e,{angle:r})}var dr=Xi;function Hi(e){let t=j(T(e)),r={},i=[],s,n=!1;for(;t.next();){let{prev:a,curr:l,next:u}=t.get();if(l.isSymbol(":")&&!s)s=kt(i),i=[];else if(l.isSymbol(";")&&s)r[s]=gr(s,kt(i),n),i=[],s=null,n=!1;else if(!l.isSymbol(";")){let o=a&&a.isSymbol("-"),f=u&&u.isSymbol("-"),c=l.isSymbol("-");!s&&!i.length&&c&&!o&&!f?u&&u.isSymbol(":")?i.push(l):n=!0:i.push(l)}}return i.length&&s&&(r[s]=gr(s,kt(i),n)),r}function gr(e,t,r){return["fill-rule","fill"].includes(e)?t:r?`-1 * (${t})`:t}function kt(e){return e.map(t=>t.value).join("")}var vr=Hi;var jt=class{constructor(){this.cache=new Map}clear(){this.cache.clear()}set(t,r){if(w(t))return"";let i=this.getKey(t);return this.cache.set(i,r),r}has(t){return this.cache.has(t)}get(t){let r=this.getKey(t);return this.cache.get(r)}getKey(t){return w(t)?"":typeof t=="string"?ye(t):ye(JSON.stringify(t))}},O=new jt;function pe(e,t){return(...r)=>{let i=e+r.join("-");return O.get(i)||O.set(i,t(...r))}}var Yi={\u03C0:Math.PI,gcd:(e,t)=>{for(;t;)[e,t]=[t,e%t];return e}},Nt={"^":7,"*":6,"/":6,"\xF7":6,"%":6,"&":5,"|":5,"+":4,"-":4,"<":3,"<<":3,">":3,">>":3,"=":3,"==":3,"\u2264":3,"<=":3,"\u2265":3,">=":3,"\u2260":3,"!=":3,"\u2227":2,"&&":2,"\u2228":2,"||":2,"(":1,")":1};function Ze(e,t,r=[]){let i=[];for(;e.length;){let{name:s,value:n,type:a}=e.shift();if(a==="variable"){let l=t[n];ue(l)&&(l=Math[n]),ue(l)&&(l=_r(n,t,r)),ue(l)&&/^\-\D/.test(n)&&(l=_r("-1"+n.substr(1),t,r)),l===void 0&&(l=0),typeof l!="number"&&(r.push(l),yr(r)?(l=0,r=[]):l=Ze(ke(l),t,r)),i.push(l)}else if(a==="function"){let l=!1;/^\-/.test(s)&&(l=!0,s=s.substr(1));let u=n.map(c=>Ze(c,t,r)),o=s.split("."),f;for(;f=o.pop();){if(!f)continue;let c=t[f]||Math[f];u=typeof c=="function"?Array.isArray(u)?c(...u):c(u):0}l&&(u=-1*u),i.push(u)}else if(/\d+/.test(n))i.push(n);else{let l=i.pop(),u=i.pop();i.push(Gi(n,Number(u),Number(l)))}}return Number(i[0])||0}function Vi(e){if(O.has(e))return O.get(e);let t=String(e),r=[],i="";for(let s=0;s<t.length;++s){let n=t[s];if(Nt[n]){let a=x(r);if(n=="="&&a&&/^[!<>=]$/.test(a.value))a.value+=n;else if(/^[|&<>]$/.test(n)&&a&&a.value==n)a.value+=n;else if(n=="-"&&t[s-1]=="e")i+=n;else if(!r.length&&!i.length&&/[+-]/.test(n))i+=n;else{let{type:l,value:u}=a||{};l=="operator"&&!i.length&&/[^()]/.test(n)&&/[^()]/.test(u)?i+=n:(i.length&&(r.push({type:"number",value:i}),i=""),r.push({type:"operator",value:n}))}}else/\S/.test(n)&&(n==","?(r.push({type:"number",value:i}),i="",r.push({type:"comma",value:n})):n=="!"?(r.push({type:"number",value:i}),r.push({type:"operator",value:n}),i=""):i+=n)}return i.length&&r.push({type:"number",value:i}),O.set(e,r),r}function ke(e){let t=Vi(e),r=[],i=[];for(let s=0;s<t.length;++s){let{type:n,value:a}=t[s],l=t[s+1]||{};if(n=="number")if(l.value=="("&&/[^\d.\-]/.test(a)){let u="",o=[],f=[];for(s+=1;t[s++]!==void 0;){let c=t[s];if(c===void 0)break;let p=c.value;if(p==")"){if(!o.length)break;o.pop(),u+=p}else if(p=="("&&o.push(p),p==","&&!o.length){let m=ke(u);m.length&&f.push(m),u=""}else u+=p}u.length&&f.push(ke(u)),i.push({type:"function",name:a,value:f})}else/[^\d.\-]/.test(a)?i.push({type:"variable",value:a}):i.push({type:"number",value:a});else if(n=="operator")if(a=="(")r.push(a);else if(a==")"){for(;r.length&&x(r)!="(";)i.push({type:"operator",value:r.pop()});r.pop()}else{for(;r.length&&Nt[x(r)]>=Nt[a];){let u=r.pop();/[()]/.test(u)||i.push({type:"operator",value:u})}r.push(a)}}for(;r.length;)i.push({type:"operator",value:r.pop()});return i}function Gi(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"%":return t%r;case"|":return t|r;case"&":return t&r;case"<":return t<r;case">":return t>r;case"^":return Math.pow(t,r);case"\xF7":case"/":return t/r;case"=":case"==":return t==r;case"\u2264":case"<=":return t<=r;case"\u2265":case">=":return t>=r;case"\u2260":case"!=":return t!=r;case"\u2227":case"&&":return t&&r;case"\u2228":case"||":return t||r;case"<<":return t<<r;case">>":return t>>r}}function _r(e,t,r){let[i,s,n]=e.match(/([\d.\-]+)(.*)/)||[],a=t[n];return a===void 0?a:typeof a=="number"?Number(s)*a:(r.push(a),yr(r)?(r=[],0):s*Ze(ke(a),t,r))}function yr(e){if(e.length>50)return!0;let t=x(e);for(let r=2;r<=4;++r){let i=e[e.length-r];if(i===void 0||t!==i)return!1}return!0}function I(e,t){let r=ke(e);return Ze(r,Object.assign({},Yi,t))}var{cos:je,sin:Ne,abs:Zi,atan2:br,PI:Tt}=Math,Et={circle:`split:180;scale:.99`,triangle:`rotate:30;scale:1.1;move:0 .2`,pentagon:`split:5;rotate:54`,hexagon:`split:6;rotate:30;scale:.98`,octagon:`split:8;rotat:22.5;scale:.99`,star:`split:10;r:cos(5t);rotate:-18;scale:.99`,infinity:`split:180;scale:.99;x:cos(t)*.99 / (sin(t)^2 + 1);y:x * sin(t)`,heart:`split:180;rotate:180;a:cos(t)*13/18 - cos(2t)*5/18;b:cos(3t)/18 + cos(4t)/18;x:(.75 * sin(t)^3) * 1.2;y:(a - b + .2) * -1.1`,bean:`split:180;r:sin(t)^3 + cos(t)^3;move:-.35 .35;`,bicorn:`split:180;x:cos(t);y:sin(t)^2 / (2 + sin(t)) - .5`,drop:`split:180;rotate:90;scale:.95;x:sin(t);y:(1 + sin(t)) * cos(t) / 1.6`,fish:`split:240;x:cos(t) - sin(t)^2 / sqrt(2) - .04;y:sin(2t)/2`,whale:`split:240;rotate:180;R:3.4 * (sin(t)^2 - .5) * cos(t);x:cos(t) * R + .75;y:sin(t) * R * 1.2`,windmill:`split:18;R:seq(.618, 1, 0);T:seq(t-.55, t, t);x:R * cos(T);y:R * sin(T)`,vase:`split:240;scale:.3;x:sin(4t) + sin(t) * 1.4;y:cos(t) + cos(t) * 4.8 + .3`,clover(e=3){return e=R(e,3,5),e==4&&(e=2),`split:240;r:cos(${e}t);scale:.98`},hypocycloid(e=3){return e=R(e,3,5),`split:240;scale:${[.34,.25,.19][e-3]};k:${e};x:(k-1)*cos(t) + cos((k-1)*t);y:(k-1)*sin(t) - sin((k-1)*t)`},bud(e=3){return e=R(e,3,10),`split:240;scale:.8;r:1 + .2 * cos(${e}t)`}},Ke=class{constructor(t,r,i){this.x=t,this.y=r,this.extra=i}valueOf(){return this.x+" "+this.y}toString(){return this.valueOf()}};function Ki(e,t){t||(t=h=>[je(h),Ne(h)]);let r=e.split||180,i=e.turn||1,s=e.frame,n=e.fill||e["fill-rule"],a=dr(e.direction||e.dir||""),l=e.unit,u=Tt*2*i/r,o=[],f,c,p=e.scale===void 0?1:e.scale,m=([h,d,v=0,g=0])=>{if(h=="evenodd"||h=="nonzero")return o.push(new Ke(h,"",""));let[_,$]=xr(h,-d,p),[A,k]=xr(v,-g,p),N=Qi(_,$,A,k,a);l!==void 0&&l!=="%"?l!=="none"&&(_+=l,$+=l):(_=(_+1)*50+"%",$=($+1)*50+"%"),o.push(new Ke(_,$,N))};(n=="nonzero"||n=="evenodd")&&m([n,"",""]);for(let h=0;h<r;++h){let d=u*h,v=t(d,h);h||(f=v),m(v)}if(s!==void 0){m(f);let h=s/100;i>1&&(h*=2),h==0&&(h=.002);for(let d=0;d<r;++d){let v=-u*d,[g,_,$=0,A=0]=t(v,d),k=br(_+A,g-$),N=[g-h*je(k),_-h*Ne(k)];d||(c=N),m(N)}m(c),m(f)}return o}function Qi(e,t,r,i,s){let n=br(t+i,e-r)*180/Tt;return s.direction==="reverse"&&(n-=180),s.direction||(n=90),s.angle&&(n+=s.angle),n}function Ji(e,t,r){let i=-Tt/180*r;return[e*je(i)-t*Ne(i),t*je(i)+e*Ne(i)]}function es(e,t,r){let[i,s=i]=S(r).map(Number);return[e+(i||0),t-(s||0),i,s]}function xr(e,t,r){let[i,s=i]=S(r).map(Number);return[e*i,t*s]}function ts(e,{min:t,max:r}){let i=R(parseInt(e.vertices||e.points||e.split)||0,t,r),s=C(e.x)?"cos(t)":e.x,n=C(e.y)?"sin(t)":e.y,a=C(e.r)?"":e.r,l=C(e.t)?"":e.t,{unit:u,value:o}=H(a);return u&&!e[u]&&u!=="t"&&(C(e.unit)&&(e.unit=u),a=e.r=o),e.degree&&(e.rotate=e.degree),e.origin&&(e.move=e.origin),e.split=i,Ki(e,(f,c)=>{let p=Object.assign({},e,{t:l||f,\u03B8:l||f,i:c+1,seq(...g){return g.length?g[c%g.length]:""},range(g,_=0){g=Number(g)||0,_=Number(_)||0,g>_&&([g,_]=[_,g]);let $=Zi(_-g)/(i-1);return g+$*c}}),m=I(s,p),h=I(n,p),d=0,v=0;if(a){let g=I(a,p);g==0&&(g=1e-5),l&&(f=I(l,p)),m=g*je(f),h=g*Ne(f)}return e.rotate&&([m,h]=Ji(m,h,Number(e.rotate)||0)),e.move&&([m,h,d,v]=es(m,h,e.move)),[m,h,d,v]})}function Y(e,t=3,r=3600,i){let s="",[n,...a]=S(e),l=!1;switch(typeof Et[n]){case"function":s=Et[n](...a),l=!0;break;case"string":s=Et[n],l=!0;break;default:s=e}let u=vr(s);typeof i=="function"&&(u=i(u));let o=ts(u,{min:t,max:r});return{rules:u,points:o,preset:l}}var wr=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];function te(e,t,r){return t+e*(r-t)}function V(e,t,r,i){let s=e&15,n=s<8?t:r,a=s<4?r:s==12||s==14?t:i;return((s&1)==0?n:-n)+((s&2)==0?a:-a)}var Ee=class{constructor(){this.p=[].concat(wr,wr)}noise(t,r,i){let{p:s}=this,[n,a,l]=[t,r,i].map(g=>Math.floor(g)&255);[t,r,i]=[t,r,i].map(g=>g-Math.floor(g));let[u,o,f]=[t,r,i].map(g=>g*g*g*(g*(g*6-15)+10)),c=s[n]+a,p=s[c]+l,m=s[c+1]+l,h=s[n+1]+a,d=s[h]+l,v=s[h+1]+l;return te(f,te(o,te(u,V(s[p],t,r,i),V(s[d],t-1,r,i)),te(u,V(s[m],t,r-1,i),V(s[v],t-1,r-1,i))),te(o,te(u,V(s[p+1],t,r,i-1),V(s[d+1],t-1,r,i-1)),te(u,V(s[m+1],t,r-1,i-1),V(s[v+1],t-1,r-1,i-1))))}};function $r(e){let t=864e5,r=t/(1e3/120),i=`${e}-animation`;return{name:e,ticks:t,"animation-name":i,animation:(s="0s")=>`${t}ms steps(${r}) ${s} infinite ${i}`}}var M=$r("cssd-utime"),B=$r("cssd-UTime"),Te={name:"cssd-umousex"},Ae={name:"cssd-umousey"},Pe={name:"cssd-uwidth"},Re={name:"cssd-uheight"};function At(e){return(...t)=>{let r=[],i=[];for(let a of t){let{unit:l,value:u}=H(a);l!==void 0&&r.push(l),u!==void 0&&i.push(u)}let s=e(...i),n=r.find(a=>a!==void 0);return n===void 0?s:Array.isArray(s)?s.map(a=>a+n):s+n}}function Ce(e){return(...t)=>{let r=t.map(s=>String(s).charCodeAt(0)),i=e(...r);return Array.isArray(i)?i.map(s=>String.fromCharCode(s)):String.fromCharCode(i)}}function Qe(e,t){return{type:e,value:t}}function rs(e,t,r){let i=0,s=e,n=u=>u>0&&u<1?.1:1,a=arguments.length;a==1&&([e,t]=[n(e),e]),a<3&&(r=n(e));let l=[];for(;(r>=0&&e<=t||r<0&&e>t)&&(l.push(e),e+=r,!(i++>=65535)););return l.length||l.push(s),l}function is(e){let t=String(e),r=[],i=[];if(!t.startsWith("[")||!t.endsWith("]"))return r;for(let s=1;s<t.length-1;++s){let n=t[s];if(!(n=="-"&&t[s-1]=="-")){if(n=="-"){i.push(n);continue}if(x(i)=="-"){i.pop();let a=i.pop();r.push(a?Qe("range",[a,n]):Qe("char",n));continue}i.length&&r.push(Qe("char",i.pop())),i.push(n)}}return i.length&&r.push(Qe("char",i.pop())),r}var ss=pe("build_range",e=>is(e).flatMap(({type:r,value:i})=>{if(r=="char")return i;let[s,n]=i,a=!1;s>n&&([s,n]=[n,s],a=!0);let l=Ce(rs)(s,n);return a&&l.reverse(),l}));function re(e){return(...t)=>e(...t.flatMap(r=>String(r).startsWith("[")?ss(r):r))}var Pt=class{constructor(t){this.prev=this.next=null,this.data=t}},Ie=class{constructor(t=20){this._limit=t,this._size=0}push(t){this._size>=this._limit&&(this.root=this.root.next,this.root.prev=null);let r=new Pt(t);this.root?(r.prev=this.tail,this.tail.next=r,this.tail=r):this.root=this.tail=r,this._size++}last(t=1){let r=this.tail;for(;--t&&r.prev;)r=r.prev;return r.data}};function Je(e,t){let r={},i=!0;for(let s=0;s<e.length;++s){let n=e[s],a=t[s];if(/=/.test(n)){let[l,u]=S(n,{symbol:"=",noSpace:!0});u!==void 0?(t.includes(l)&&(r[l]=u),i=!1):r[a]=n}else i&&(r[a]=n)}return r}function Rt(e){return K((t,r,...i)=>{if(!i||!r)return"";let s=E(r()),n=s;/\D/.test(s)&&!/\d+[x-]\d+/.test(s)&&(n=I(s),n===0&&(n=s));let a=Math.random();return Kt(n,(...l)=>i.map(u=>E(u(...l,a))).join(",")).join(e)})}function ie(e,t,r){return e[t]||(e[t]=new Ie(1024)),e[t].push(r),r}function Sr(e){return-1*e}function ns(e,t,r,i=1){let n=Math.sqrt(2/4)*i,[a,l]=[-n,n];return qe((e-a)/(l-a),t*i,r*i)}function kr(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"/":return t/r;case"%":return t%r;default:return 0}}function et(e,t){return[`calc(${e})`,t]}function ls(e,t){if(C(t)||C(e))return[];if(/^[\+\*\-\/%][\-\.\d\s]/.test(t)){let r=t[0],{unit:i="",value:s}=H(t.substr(1).trim()||0);return/var\(/.test(e)?et(r==="%"?`mod(${e}, ${s})`:`${e} ${r} ${s}`,i):[kr(r,Number(e),Number(s)),i]}else if(/[\+\*\-\/%]$/.test(t)){let r=t.substr(-1),{unit:i="",value:s}=H(t.substr(0,t.length-1).trim()||0);return/var\(/.test(e)?et(r==="%"?`mod(${s}, ${e})`:`${s} ${r} ${e}`,i):[kr(r,Number(s),Number(e)),i]}else{let{unit:r="",value:i}=H(t||0);return[Number(e)+Number(i),r]}}function b(e){let t="";return(...r)=>{for(let i of r){let[s,n]=ls(e,i);e=s,!t&&n&&(t=n)}return/^calc\(/.test(e)?`calc(${e} * 1${t})`:e+t}}var he=oe({i({count:e}){return b(e)},y({y:e}){return b(e)},x({x:e}){return b(e)},z({z:e}){return b(e)},I({grid:e}){return b(e.count)},Y({grid:e}){return b(e.y)},X({grid:e}){return b(e.x)},Z({grid:e}){return b(e.z)},iI({count:e,grid:t}){return b(e/t.count)},Ii({count:e,grid:t}){return b((t.count-e+1)/t.count)},xX({x:e,grid:t}){return b(e/t.x)},Xx({x:e,grid:t}){return b((t.x-e+1)/t.x)},yY({y:e,grid:t}){return b(e/t.y)},Yy({y:e,grid:t}){return b((t.y-e+1)/t.y)},id({x:e,y:t,z:r}){return i=>X(e,t,r)},dx({x:e,grid:t}){return b(e-.5-t.x/2)},dy({y:e,grid:t}){return b(e-.5-t.y/2)},n({extra:e}){let t=x(e);return t?b(t[0]):"@n"},nx({extra:e}){let t=x(e);return t?b(t[1]):"@nx"},ny({extra:e}){let t=x(e);return t?b(t[2]):"@ny"},nd({extra:e}){let t=x(e);if(t){let r=t[0],i=t[3];return s=>(s=Number(s)||0,r-.5-s-i/2)}return"@nd"},N({extra:e}){let t=x(e);return t?b(t[3]):"@N"},nN({extra:e}){let t=x(e);return t?b(t[0]/t[3]):"@nN"},Nn({extra:e}){let t=x(e);if(t){let r=t[0],i=t[3];return b((i-r+1)/i)}return"@Nn"},m:Rt(","),M:Rt(" "),\u00B5:Rt(""),p({context:e,pick:t}){return re((...r)=>{r.length||(r=e.last_pick_args||[]);let i=t(r);return e.last_pick_args=r,ie(e,"last_pick",i)})},P({context:e,pick:t,position:r}){let i="P-counter"+r;return re((...s)=>{let n=!0;s.length||(s=e.last_pick_args||[],n=!1);let a=e.last_pick,l=a?a.last(1):"";if(n&&(e[i]||(e[i]={}),l=e[i].last_pick),s.length>1){let o=s.findIndex(f=>f===l);o!==-1&&s.splice(o,1)}let u=t(s);return e.last_pick_args=s,n&&(e[i].last_pick=u),ie(e,"last_pick",u)})},pl({context:e,extra:t,upextra:r,position:i},s){let n=s?x(r.length?r:t):x(t),a=n?x(n):"",l=(s?"PL-counter":"pl-counter")+i+a;return re((...u)=>{e[l]||(e[l]=0),e[l]+=1;let o=u.length,f=n&&n[6];f??=e[l];let c=(f-1)%o,p=u[c];return ie(e,"last_pick",p)})},PL(e){return he.pl(e,!0)},pr({context:e,extra:t,upextra:r,position:i},s){let n=s?x(r.length?r:t):x(t),a=n?x(n):"",l=(s?"PR-counter":"pr-counter")+i+a;return re((...u)=>{e[l]||(e[l]=0),e[l]+=1;let o=u.length,f=n&&n[6];f??=e[l];let c=(f-1)%o,p=u[o-c-1];return ie(e,"last_pick",p)})},PR(e){return he.pr(e,!0)},pd({context:e,extra:t,upextra:r,position:i,shuffle:s},n){let a=n?x(r.length?r:t):x(t),l=a?x(a):"",u=(n?"PD-counter":"pd-counter")+i+l,o=(n?"PD-valeus":"pd-values")+i+l;return re((...f)=>{e[u]||(e[u]=0),e[u]+=1,e[o]||(e[o]=s(f||[]));let c=f.length,p=a&&a[6];p??=e[u];let m=(p-1)%c,h=e[o][m];return ie(e,"last_pick",h)})},PD(e){return he.pd(e,!0)},lp({context:e}){return(t=1)=>{let r=e.last_pick;return r?r.last(t):""}},r({context:e,rand:t}){return(...r)=>{let s=(r.length&&r.every(Ue)?Ce:At)(t)(...r);return ie(e,"last_rand",s)}},rn({x:e,y:t,context:r,position:i,grid:s,extra:n,random:a}){let l="noise-2d"+i,u=l+"offset-x",o=l+"offset-y",[f,c,p,m,h,d]=x(n)||[],v=f&&m;return(...g)=>{let{from:_=0,to:$=_,frequency:A=1,scale:k=1,octave:N=1}=Je(g,["from","to","frequency","scale","octave"]);A=R(A,0,1/0),k=R(k,0,1/0),N=R(N,1,100),g.length==1&&([_,$]=[0,_]),r[l]||(r[l]=new Ee),r[u]||(r[u]=a()),r[o]||(r[o]=a());let L=Ue(_)&&Ue($)?Ce:At,ne=r[l],le=r[u],ae=r[o],G=(v?(c-1)/h:(e-1)/s.x)+le,Z=(v?(p-1)/d:(t-1)/s.y)+ae;(h<=1||s.x<=1)&&(G=0),(d<=1||s.y<=1)&&(Z=0),G==0&&Z==0&&(G=le,Z=ae);let De=ne.noise(G*A,Z*A,0)*k;for(let de=1;de<N;++de){let ge=de*2;De+=ne.noise(G*A*ge,Z*A*ge,0)*(k/ge)}let Qr=L((de,ge)=>ns(De,de,ge,k));return ie(r,"last_rand",Qr(_,$))}},lr({context:e}){return(t=1)=>{let r=e.last_rand;return r?r.last(t):""}},stripe(){return(...e)=>{let t=e.map(E).flat(),r=t.length,i=0,s=[],n;if(!r)return"";t.forEach(l=>{let[u,o]=S(l);o!==void 0?s.push(o):i+=1});let a=s.length?`(100% - ${s.join(" - ")}) / ${i}`:`100% / ${r}`;return t.map((l,u)=>{if(s.length){let[o,f]=S(l);return n=(n?n+" + ":"")+(f!==void 0?f:a),`${o} 0 calc(${n})`}return`${l} 0 ${100/r*(u+1)}%`}).join(",")}},calc(){return(e,t)=>I(E(e),t)},hex(){return e=>parseInt(E(e)).toString(16)},svg:K((e,...t)=>{let r=t.map(s=>E(s())).join(",");if(!r.startsWith("<")){let s=Q(r);r=ce(s)}let i=$t(r);return Se(i)}),"svg-filter":K((e,...t)=>{let r=t.map(a=>E(a())),i=r.join(","),s=fe("filter-");if(r.every(a=>/^[\-\d.]/.test(a)||/^(\w+)/.test(a)&&!/[{}<>]/.test(a))){let{frequency:a,scale:l,octave:u,seed:o=e.seed,blur:f,erode:c,dilate:p}=Je(r,["frequency","scale","octave","seed","blur","erode","dilate"]);if(i=`x:-20%;y:-20%;width:140%;height:140%;`,w(p)||(i+=`feMorphology {operator:dilate;radius:${p};}`),w(c)||(i+=`feMorphology {operator:erode;radius:${c};}`),w(f)||(i+=`feGaussianBlur {stdDeviation:${f};}`),!w(a)){let[m,h=m]=S(a);u=u?`numOctaves:${u};`:"",i+=`feTurbulence {type:fractalNoise;baseFrequency:${m} ${h};seed:${o};${u}}`,l&&(i+=`feDisplacementMap {in:SourceGraphic;scale:${l};}`)}}if(!i.startsWith("<")){let a=Q(i,{type:"block",name:"filter"});i=ce(a)}let n=$t(i).replace(/<filter([\s>])/,`<filter id="${s}"$1`);return Se(n,s)}),"svg-pattern":K((e,...t)=>{let r=t.map(n=>E(n())).join(","),i=Q(`viewBox:0 0 1 1;preserveAspectRatio:xMidYMid slice;rect {width, height:100%;fill:defs pattern {${r}}}`),s=ce(i);return Se(s)}),"svg-polygon":K((e,...t)=>{let r=t.map(o=>E(o())).join(","),{rules:i,points:s}=Y(r,3,65536,o=>(delete o.frame,o.unit="none",o["stroke-width"]??=.01,o.stroke??="currentColor",o.fill??="none",o)),n=`points:${s};`,a="",l=i.padding??Number(i["stroke-width"])/2;for(let o of Object.keys(i))/^(stroke|fill|clip|marker|mask|animate|draw)/.test(o)&&(a+=`${o}:${i[o]};`);let u=Q(`viewBox:-1 -1 2 2 p ${l};polygon {${a} ${n}}`);return Se(ce(u))}),var(){return e=>`var(${E(e)})`},ut(){return b(`var(--${M.name})`)},ts(){return b(`calc(var(--${M.name}) / 1000)`)},TS(){return b(`calc(var(--${B.name}) / 1000)`)},UT(){return b(`var(--${B.name})`)},uw(){return b(`var(--${Pe.name})`)},uh(){return b(`var(--${Re.name})`)},ux(){return b(`var(--${Te.name})`)},uy(){return b(`var(--${Ae.name})`)},plot({count:e,context:t,extra:r,position:i,grid:s}){let n=x(r);return(...a)=>{let l=a.join(","),[u=e,o,f,c=s.count]=n||[],{points:p,rules:m}=Y(l,1,65536,h=>(delete h.fill,delete h["fill-rule"],delete h.frame,h.split||h.points?h.hasPoints=!0:h.points=c,h));return m.hasPoints?p:p[u-1]}},Plot({count:e,context:t,extra:r,position:i,grid:s}){let n=x(r);return(...a)=>{let l=a.join(","),[u=e,o,f,c=s.count]=n||[],{points:p,rules:m}=Y(l,1,65536,h=>(delete h.fill,delete h["fill-rule"],delete h.frame,h.split||h.points?h.hasPoints=!0:h.points=c,h.unit=h.unit||"none",h));return m.hasPoints?p:p[u-1]}},shape(){return pe("shape-function",(...e)=>{let t=e.join(","),{points:r}=Y(t);return`polygon(${r.join(",")})`})},doodle(){return e=>e},shaders(){return e=>e},pattern(){return e=>e},invert(){return e=>{let t=$e(e);return t.valid?t.commands.map(({name:r,value:i})=>{switch(r){case"v":return"h"+i.join(" ");case"V":return"H"+i.join(" ");case"h":return"v"+i.join(" ");case"H":return"V"+i.join(" ");default:return r+i.join(" ")}}).join(" "):e}},flipH(){return e=>{let t=$e(e);return t.valid?t.commands.map(({name:r,value:i})=>{switch(r){case"h":case"H":return r+i.map(Sr).join(" ");default:return r+i.join(" ")}}).join(" "):e}},flipV(){return e=>{let t=$e(e);return t.valid?t.commands.map(({name:r,value:i})=>{switch(r){case"v":case"V":return r+i.map(Sr).join(" ");default:return r+i.join(" ")}}).join(" "):e}},flip(...e){let t=he.flipH(...e),r=he.flipV(...e);return i=>r(t(i))},reverse(){return(...e)=>{let t=e.map(E),r=$e(t.join(","));if(r.valid){let i=[];for(let s=r.commands.length-1;s>=0;--s){let{name:n,value:a}=r.commands[s];i.push(n+a.join(" "))}return i.join(" ")}return t.reverse()}},cycle(){return(...e)=>{e=e.map(n=>"<"+n+">");let t=[],r;e.length==1?(r=" ",t=S(e[0],{symbol:r})):(r=",",t=S(e.map(E).join(r),{symbol:r})),t=t.map(n=>n.replace(/^\<|>$/g,""));let i=t.length-1,s=[t.join(r)];for(let n=0;n<i;++n){let a=t.shift();t.push(a),s.push(t.join(r))}return s}},mirror(){return(...e)=>{for(let t=e.length-1;t>=0;--t)e.push(e[t]);return e}},Mirror(){return(...e)=>{for(let t=e.length-2;t>=0;--t)e.push(e[t]);return e}},code(){return(...e)=>e.map(t=>String.fromCharCode(t))},once:K(({context:e,extra:t,position:r},...i)=>{let s="once-counter"+r;return e[s]??=i.map(n=>E(n())).join(",")}),raw({rules:e}){return(t="")=>{try{let r=t.substring(t.indexOf(",")+1,t.lastIndexOf('")'));if(t.startsWith("${doodle")&&t.endsWith("}")){let i=t.substring(2,t.length-1),s=e.doodles;if(s&&s[i])return`<css-doodle>${s[i].doodle}</css-doodle>`}if(t.startsWith('url("data:image/svg+xml;utf8'))return decodeURIComponent(r);if(t.startsWith('url("data:image/svg+xml;base64'))return atob(r);if(t.startsWith('url("data:image/png;base64'))return`<img src="${t}" alt="" />`}catch{}return t}}},{index:"i",col:"x",row:"y",depth:"z",rand:"r",pick:"p",pn:"pl",pnr:"pr",PN:"PL",PNR:"PR",R:"rn",T:"UT",t:"ut",stripes:"stripe",strip:"stripe",patern:"pattern",flipv:"flipV",fliph:"flipH",filter:"svg-filter","last-rand":"lr","last-pick":"lp",multiple:"m",multi:"m",rep:"\xB5",repeat:"\xB5",ms:"M",s:"I",size:"I",sx:"X","size-x":"X","size-col":"X","max-col":"X",sy:"Y","size-y":"Y","size-row":"Y","max-row":"Y",sz:"Z","size-z":"Z","size-depth":"Z",Svg:"svg","pick-by-turn":"pl","pick-n":"pl","pick-d":"pd",offset:"plot",Offset:"Plot",point:"plot",Point:"Plot",unicode:"code"}),Ct=he;var jr={a0:[841,1189],a1:[594,841],a2:[420,594],a3:[297,420],a4:[210,297],a5:[148,210],a6:[105,148],b0:[1e3,1414],b1:[707,1e3],b2:[500,707],b3:[353,500],b4:[250,353],b5:[176,250],b6:[125,176],c0:[917,1297],c1:[648,917],c2:[458,648],c3:[324,458],c4:[229,324],c5:[162,229],d0:[764,1064],d1:[532,760],d2:[380,528],d3:[264,376],d4:[188,260],d5:[130,184],d6:[92,126],letter:[216,279],postcard:[100,148],poster:[390,540]},as={portrait:"p",pt:"p",p:"p",landscape:"l",ls:"l",l:"l"},us="mm";function Nr(e,t){e=String(e).toLowerCase();let[r,i]=jr[e]??[];return as[t]=="p"&&([i,r]=[r,i]),[i,r].map(s=>s+us)}function Er(e){return!!jr[e]}var Tr="--_cell-width",Ar="--_cell-height",os={center:"50%",left:"0%",right:"100%",top:"50%",bottom:"50%"},fs={center:"50%",top:"0%",bottom:"100%",left:"50%",right:"50%"},ze=oe({size(e,{is_special_selector:t,grid:r}){let[i,s=i,n]=S(e);Er(i)&&([i,s]=Nr(i,s));let a=`width:${i};height:${s};`;return(i==="auto"||s==="auto")&&(n&&(/^\(.+\)$/.test(n)?n=n.substring(1,n.length-1):/^calc/.test(n)||(n=`calc(${n})`),t||(a+=`aspect-ratio:${n};`)),t&&(a+=`aspect-ratio:${n||r.ratio};`)),t||(a+=`${Tr}:${i};${Ar}:${s};`),a},place(e,{extra:t}){let[r,i="50%"]=S(e);r=os[r]||r,i=fs[i]||i;let s=`var(${Tr}, 25%)`,n=`var(${Ar}, 25%)`;return`position:absolute;left:${r};top:${i};width:${s};height:${n};margin-left:calc(${s} / -2);margin-top:calc(${n} / -2);grid-area:unset;--plot-angle:${t||0};rotate:${t||0}deg;`},grid(e,t){let r={clip:!0,p3d:!1},i=[],s=0;for(let a of S(e,{symbol:" "}))s===0&&(a==="|"||a==="-")?(r.flex=a==="|"?"column":"row",i.push("\xA7")):/^no\-*clip$/i.test(a)?(r.clip=!1,i.push("\xA7")):/^p3d$/i.test(a)?(r.p3d=!0,i.push("\xA7")):(r.grid||(r.grid=W(a,t.max_grid)),i.push(a)),s+=1;let n=S(i.join(" "),{symbol:["/ 2","+","^","*","~","\u2206","_","\xDF","\xA7"],noSpace:!0,verbose:!0});for(let{group:a,value:l}of n){if(a==="+"&&(r.scale=l),a==="^"&&(r.enlarge=l),a==="~"&&(r.translate=l),a==="\u2206"&&(r.persp=S(l,{symbol:" "})),a==="_"&&(r.gap=l),a==="*"){let[u,...o]=S(l,{symbol:" "});u=="h"?r.hueRotate=o.join(" "):r.rotate=l}if(a==="/"&&(r.size===void 0?r.size=this.size(l,t):r.fill=l),a==="\xDF"){let u=S(l,{symbol:" "});for(let o=0;o<u.length;o++)if(Number(u[o])){u[o]+="px";break}u.length===1&&/^\D/.test(u[0])&&!/^\.\d/.test(u[0])&&u.push("1px"),/solid|dotted|dashed|double|groove|ridge|inset|outset/.test(l)||u.push("solid"),r.border=u.join(" ")}a===""&&!r.grid&&(r.grid=W(l,t.max_grid))}return r},gap(e){return e},seed(e){return e},shape:pe("shape-property",e=>{let{points:t,preset:r}=Y(e);return r?`clip-path:polygon(${t.join(",")});`:""}),use(e){if(e.length>2)return e},content(e){return e}},{"place-cell":"place",offset:"place",position:"place"});function It(e){let t=j(T(e)),r=[],i=[],s,n;for(;t.next();){let{prev:a,curr:l,next:u}=t.get(),o=l.value;if(l.isSymbol())if(o==="+"||o==="-")s=o;else{n="Unexpected "+l.value;break}else if(l.isNumber()){if((r.length||i.length)&&!s){n="Syntax error";break}if(o=Pr(Number(o),s),s=null,u&&u.value==="n"){r.push(o),t.next();continue}else i.push(o)}else if(o==="n"){if((r.length||i.length)&&!s){n="Syntax error";break}r.push(Pr(1,s)),s=null}else if(!l.isSpace()){n="Unexpected "+o;break}}return n?{a:0,b:0,error:n}:{a:Rr(r),b:Rr(i)}}function Pr(e,t){return t==="+"?e:t==="-"?-1*e:e}function Rr(e){return e.reduce((t,r)=>t+r,0)}function rt(e){return!!(e%2)}function Mt(e){return!rt(e)}function zt(e){let t="";return e==0?t="$:hover":e>0?t=`$:hover ${"+*".repeat(e)}`:t=`:has(+ ${"*+".repeat(Math.abs(e+1))} $:hover)`,t}function tt(e,t,r,i){let s=r==null||i==null;if(e==="even")return{value:s?Mt(t):rt(r+i)};if(e==="odd")return{value:s?rt(t):Mt(r+i)};if(e==="n")return{value:!0};let{a:n,b:a,error:l}=It(e);if(l)return{value:!1,error:l};if(n===0)return{value:t===a};{let u=(t-a)/n;return{value:u>=0&&Number.isInteger(u)}}}var Cr=oe({at({x:e,y:t}){return(r,i)=>e==r&&t==i},nth({count:e,grid:t}){return(...r)=>{for(let i of r)if(tt(i,e).value)return!0;return!1}},y({y:e,grid:t}){return(...r)=>{for(let i of r)if(tt(i,e).value)return!0;return!1}},x({x:e,grid:t}){return(...r)=>{for(let i of r)if(tt(i,e).value)return!0;return!1}},even({x:e,y:t}){return r=>rt(e+t)},odd({x:e,y:t}){return r=>Mt(e+t)},random({random:e,count:t,x:r,y:i,grid:s}){return(n=.5)=>/\D/.test(n)?e()<I("("+n+")",{x:r,X:s.x,y:i,Y:s.y,i:t,I:s.count,random:e}):e()<n},match({count:e,grid:t,x:r,y:i,random:s}){return n=>!!I("("+n+")",{x:r,X:t.x,y:i,Y:t.y,i:e,I:t.count,random:s})},cell({count:e,grid:t,x:r,y:i,random:s}){return(...n)=>n.length?n.map(l=>{let{value:u,error:o}=tt(l,e,r,i);return o?!!I("("+l+")",{x:r,X:t.x,y:i,Y:t.y,i:e,I:t.count,random:s}):u}).some(Boolean):!0},hover({count:e,x:t,y:r,grid:i,random:s}){return(...n)=>{let a=[];n.length||a.push(zt(0));for(let l of n){let[u,o]=String(l).split(/\s+/);if(u=Number(u),o=Number(o),Number.isNaN(o)&&!Number.isNaN(u)&&a.push(zt(u)),!Number.isNaN(u)&&!Number.isNaN(o)){let f=u+t,c=o+r;if(f>=1&&f<=i.x&&c>=1&&c<=i.y){let p=o*i.y+u;a.push(zt(p))}}}return a.length?{selector:a.join(",")}:!1}}},{col:"x",row:"y"});var Me=globalThis,Oe=Math,it=[],U=256,Mr=6,cs=52,ps="random",hs=Oe.pow(U,Mr),Or=Oe.pow(2,cs),ms=Or*2,se=U-1,Ir;function ds(e,t,r){var i=[];t=t==!0?{entropy:!0}:t||{};var s=Ot(Br(t.entropy?[e,Be(it)]:e??vs(),3),i),n=new gs(i),a=function(){for(var l=n.g(Mr),u=hs,o=0;l<Or;)l=(l+o)*U,u*=U,o=n.g(1);for(;l>=ms;)l/=2,u/=2,o>>>=1;return(l+o)/u};return a.int32=function(){return n.g(4)|0},a.quick=function(){return n.g(4)/4294967296},a.double=a,Ot(Be(n.S),it),(t.pass||r||function(l,u,o,f){return f&&(f.S&&zr(f,n),l.state=function(){return zr(n,{})}),o?(Oe[ps]=l,u):l})(a,s,"global"in t?t.global:this==Oe,t.state)}function gs(e){var t,r=e.length,i=this,s=0,n=i.i=i.j=0,a=i.S=[];for(r||(e=[r++]);s<U;)a[s]=s++;for(s=0;s<U;s++)a[s]=a[n=se&n+e[s%r]+(t=a[s])],a[n]=t;(i.g=function(l){for(var u,o=0,f=i.i,c=i.j,p=i.S;l--;)u=p[f=se&f+1],o=o*U+p[se&(p[f]=p[c=se&c+u])+(p[c]=u)];return i.i=f,i.j=c,o})(U)}function zr(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function Br(e,t){var r=[],i=typeof e,s;if(t&&i=="object")for(s in e)try{r.push(Br(e[s],t-1))}catch{}return r.length?r:i=="string"?e:e+"\0"}function Ot(e,t){for(var r=e+"",i,s=0;s<r.length;)t[se&s]=se&(i^=t[se&s]*19)+r.charCodeAt(s++);return Be(t)}function vs(){try{var e;return Ir&&(e=Ir.randomBytes)?e=e(U):(e=new Uint8Array(U),(Me.crypto||Me.msCrypto).getRandomValues(e)),Be(e)}catch{var t=Me.navigator,r=t&&t.plugins;return[+new Date,Me,r,Me.screen,Be(it)]}}function Be(e){return String.fromCharCode.apply(0,e)}Ot(Oe.random(),it);var Le=ds;var _s=new Date().setHours(0,0,0,0)-Date.now();function q(e){return/^\:(host|doodle)/.test(e)}function st(e){return/^\:container/.test(e)}function Bt(e){return q(e)||st(e)}function ys(e){return/\:before|\:after/.test(e)}var Lr={};for(let e of Object.getOwnPropertyNames(Math))Lr[e]=()=>(...t)=>typeof Math[e]=="number"?Math[e]:(t=t.map(r=>I(E(r))),Math[e](...t));var Lt=class{constructor(t){this.tokens=t,this.rules={},this.props={},this.keyframes={},this.grid=null,this.seed=null,this.is_grid_set=!1,this.is_gap_set=!1,this.coords=[],this.doodles={},this.pattern={},this.shaders={},this.vars={},this.uniforms={},this.content={},this.reset()}reset(){this.styles={host:"",container:"",cells:"",keyframes:""},this.coords=[],this.doodles={},this.pattern={},this.shaders={},this.content={},this.vars={};for(let t in this.rules)t.startsWith("#c")&&delete this.rules[t]}add_rule(t,r){let i=this.rules[t];i||(i=this.rules[t]=[]),i.push.apply(i,xe(r))}pick_func(t){return t.startsWith("$")&&(t="calc"),Ct[t]||Lr[t]}apply_func(t,r,i,s,n={}){let a=t(...xe(r)),l=[];if(i.forEach(u=>{let o=typeof u.value;if(!u.cluster&&(o==="number"||o==="string"))l.push(...S(u.value,{noSpace:!0}));else if(typeof u=="function")l.push(u);else if(!w(u.value)){let f=E(u.value);l.push(f)}}),l=xe(tr(l)),typeof a=="function"){if(s.startsWith("$")){let u=Object.assign({},this.vars.host,this.vars.container,this.vars[r.count],n),o={},f="";for(let[c,p]of Object.entries(u))o[c.substr(2)]=p;return s.length>1&&(f=s.split("$")[1]??""),a(l,o)+f}return a(...l)}return a}compose_aname(...t){return t.join("-")}compose_selector({x:t,y:r,z:i},s=""){return`#${X(t,r,i)}${s}`}is_composable(t){return["doodle","shaders","pattern"].includes(t)}read_var(t,r,i){let s=r.count,n=Object.assign({},this.vars.host,this.vars.container,this.vars[s],i);if(n[t]!==void 0){let a=String(n[t]).trim();return a[0]=="("&&a[a.length-1]===")"&&(a=a.substring(1,a.length-1)),a.replace(/;+$/g,"")}return t}compose_argument(t,r,i=[],s,n){r.extra||(r.extra=[]),r.extra.push(i);let a=t.map(l=>{if(l.type==="text")return/^\-\-\w/.test(l.value)?s&&s.name==="@var"?l.value:this.read_var(l.value,r,n):l.value;if(l.type==="func"){let u=l.name.substr(1),o=this.pick_func(u);if(typeof o=="function"){if(this.check_uniforms(u),this.is_composable(u)){let c=E((l.arguments[0]||[])[0]),p;if(u==="doodle"&&/^\d/.test(c)&&(p=c,c=E((l.arguments[1]||[])[0])),!w(c))switch(u){case"doodle":return this.compose_doodle(this.inject_variables(c,r.count),p,structuredClone(r.extra));case"shaders":return this.compose_shaders(c,r);case"pattern":return this.compose_pattern(c,r)}}r.position=l.position;let f=l.arguments.map(c=>o.lazy?(...p)=>this.compose_argument(c,r,p,l,n):this.compose_argument(c,r,i,l,n));return this.apply_func(o,r,f,u,n)}else return l.name}});return r.extra.pop(),{cluster:t.cluster,value:a.length>=2?{value:a.join("")}:a[0]}}compose_doodle(t,r,i){let s=fe("doodle");return this.doodles[s]={doodle:t,arg:r,upextra:i},"${"+s+"}"}compose_shaders(t,{x:r,y:i,z:s}){let n=fe("shader");return this.shaders[n]={shader:t,id:"--"+n,cell:X(r,i,s)},"${"+n+"}"}compose_pattern(t,{x:r,y:i,z:s}){let n=fe("pattern");return this.pattern[n]={code:t,id:"--"+n,cell:X(r,i,s)},"${"+n+"}"}check_uniforms(t){switch(t){case"ut":case"UT":case"t":case"T":case"ts":case"TS":this.uniforms.time=!0;break;case"ux":this.uniforms.mousex=!0;break;case"uy":this.uniforms.mousey=!0;break;case"uw":this.uniforms.width=!0;break;case"uh":this.uniforms.height=!0;break}}inject_variables(t,r){let i=Object.assign({},this.vars.host,this.vars.container,this.vars[r]),s=[];for(let[n,a]of Object.entries(i))s.push(`${n}:${a};`);return s=s.join(""),s.length?`:doodle {${s}}`+t:t}compose_variables(t,r,i={}){for(let[s,n]of Object.entries(t))i[s]=this.get_composed_value(n,r,i).value;return i}compose_value(t,r,i={}){if(!Array.isArray(t))return{value:"",extra:""};let s="";return{value:t.reduce((a,l)=>{switch(l.type){case"text":{a+=l.value;break}case"func":{let u=l.name.substr(1),o=this.pick_func(u);if(typeof o=="function")if(this.check_uniforms(u),this.is_composable(u)){let f=E((l.arguments[0]||[])[0]),c;if(u==="doodle"&&/^\d/.test(f)&&(c=f,f=E((l.arguments[1]||[])[0])),!w(f))switch(u){case"doodle":a+=this.compose_doodle(this.inject_variables(f,r.count),c,structuredClone(r.extra));break;case"shaders":a+=this.compose_shaders(f,r);break;case"pattern":a+=this.compose_pattern(f,r);break}}else{r.position=l.position,l.variables&&this.compose_variables(l.variables,r,i);let f=l.arguments.map(p=>o.lazy?(...m)=>this.compose_argument(p,r,m,l,i):this.compose_argument(p,r,[],l,i)),c=this.apply_func(o,r,f,u,i);w(c)||(a+=c,c.extra&&(s=c.extra))}else a+=l.name}}return a},""),extra:s}}get_composed_value(t,r,i){let s,n=[];return Array.isArray(t)&&(n=t.reduce((a,l)=>{let u=this.compose_value(l,r,i||{});return u&&(u.value&&a.push(u.value),u.extra&&(s=u.extra)),a},[])),{extra:s,group:n,value:n.join(",")}}add_grid_style({fill:t,clip:r,rotate:i,hueRotate:s,scale:n,translate:a,enlarge:l,skew:u,persp:o,flex:f,p3d:c,border:p,gap:m}){if(t&&this.add_rule(":host",`background:${t};`),r||this.add_rule(":host","contain:none;"),i&&(/[0-9]$/.test(i)&&(i+="deg"),this.add_rule(":container",`rotate:${i};`)),s&&(/[0-9]$/.test(s)&&(s+="deg"),this.add_rule(":host",`filter:hue-rotate(${s});`)),n&&this.add_rule(":container",`scale:${n};`),a&&this.add_rule(":container",`translate:${a};`),o){let[h,...d]=o;this.add_rule(":host",`perspective:${h};`),d.length&&this.add_rule(":host",`perspective-origin:${d.join(" ")};`)}if(l&&this.add_rule(":container",`width:calc(${l} * 100%);height:calc(${l} * 100%);left:50%;top:50%;transform-origin:0 0;transform:translate(-50%, -50%);`),f&&(this.add_rule(":container","display:flex;"),this.add_rule("cell","flex:1;"),f==="column"&&this.add_rule(":container","flex-direction:column;")),c){let h="transform-style:preserve-3d;";this.add_rule(":host",h),this.add_rule(":container",h)}p!==void 0&&this.add_rule(":host",`border:${p};`),m&&this.add_rule(":container",`gap:${m};`)}compose_rule(t,r,i){let s=Object.assign({},r),n=t.property;if(n==="@seed")return"";let a=this.get_composed_value(t.value,s),l=a.extra,u=a.value;if(/^animation(\-name)?$/.test(n)){if(this.props.has_animation=!0,q(i)){let c="animation-name",p=M.n+","+B.n;p&&u&&(u=p+","+u)}if(s.count>1){let{count:c}=s;switch(n){case"animation-name":{u=a.group.map(p=>this.compose_aname(p,c)).join(",");break}case"animation":u=a.group.map(p=>{let m=(p||"").split(/\s+/);return m[0]=this.compose_aname(m[0],c),m.join(" ")}).join(",")}}}if(n==="content"){/["']|^none\s?$|^(var|counter|counters|attr|url)\(/.test(u)||(u=`'${u}'`);let c=new Map;return u=u.replace(/var\(\-\-cssd\-u(time|mousex|mousey|width|height)\)/gi,(p,m)=>(c.set(m,`${m} calc(${p})`),`counter(${m})`)),`${c.size?`counter-reset:${Array.from(c.values()).join(" ")};`:""} content:${u};`}n==="transition"&&(this.props.has_transition=!0);let o=`${n}:${u};`;if((n==="width"||n==="height")&&(Bt(i)||(o+=`--_cell-${n}:${u};`)),/^background(\-image)?$/.test(n)&&/\$\{(shader|pattern)/.test(u)&&(o+="background-size:100% 100%;"),/^\-\-/.test(n)&&this.compose_vars(r,i,n,u),/^@/.test(n)&&ze[n.substr(1)]){let c=n.substr(1),p=ze[c](u,{is_special_selector:Bt(i),grid:s.grid,max_grid:s.max_grid,extra:l});switch(c){case"grid":{q(i)?(o=p.size||"",this.add_grid_style(p)):(o="",this.is_grid_set||(p=ze[c](u,{is_special_selector:!0,grid:s.grid,max_grid:s.max_grid}),this.add_rule(":host",p.size||""),this.add_grid_style(p))),this.grid=s.grid,this.is_grid_set=!0;break}case"gap":{o="",this.is_gap_set||(this.add_rule(":container",`gap:${p};`),this.is_gap_set=!0);break}case"content":{o="";let m=this.compose_selector(s);p!==void 0&&!ys(i)&&!st(i)&&(this.content[m]=xs(String(p))),this.content[m]=Ct.raw({rules:{doodles:this.doodles}})(this.content[m]||"")}case"seed":{o="";break}case"place-cell":case"place":case"position":case"offset":{q(i)||(o=p);break}case"use":{t.value.length&&this.compose(s,t.value),o="";break}default:o=p}}return/^grid/.test(n)&&q(i)&&(this.add_rule(":container",`${n}:${u};`),o=""),o}get_raw_value(t){let r=t.raw()??"",[i,...s]=r.split(t.property);return s=s.join(t.property).replace(/^\s*:\s*/,"").replace(/[;}<]$/,"").trim().replace(/[;}<]$/,""),s}compose_vars(t,r,i,s){let n=t.count;st(r)&&(n="container"),q(r)&&(n="host"),this.vars[n]||(this.vars[n]={}),this.vars[n][i]=s}pre_compose_rule(t,r,i){let s=Object.assign({},r),n=t.property,a=Object.assign({},this.vars.host,this.vars.container,this.vars[s.count]);if(/^\-\-/.test(n)){let l=this.get_composed_value(t.value,s,a).value;this.compose_vars(r,i,n,l)}switch(n){case"@grid":{let l=this.get_composed_value(t.value,s,a).value,u=n.substr(1),o=ze[u](l,{max_grid:r.max_grid});this.grid=o.grid;break}case"@use":{t.value.length&&this.pre_compose(s,t.value);break}}}pre_compose(t,r){w(this.seed)&&((r||this.tokens).forEach(i=>{if(i.type==="rule"&&i.property==="@seed"&&(this.seed=this.get_raw_value(i)),i.type==="pseudo"&&q(i.selector))for(let s of xe(i.styles))s.type==="rule"&&s.property==="@seed"&&(this.seed=this.get_raw_value(s))}),w(this.seed)||t.update_random(this.seed)),(r||this.tokens).forEach(i=>{switch(i.type){case"rule":{this.pre_compose_rule(i,t);break}case"pseudo":{q(i.selector)&&(i.styles||[]).forEach(s=>{this.pre_compose_rule(s,t,s.selector)});break}}})}compose(t,r,i){this.coords.push(t),(r||this.tokens).forEach((s,n)=>{if(s.skip||i&&this.grid||s.property==="@gap"&&this.is_gap_set||s.property==="@grid"&&this.is_grid_set)return!1;switch(s.type){case"rule":{this.add_rule(this.compose_selector(t),this.compose_rule(s,t));break}case"pseudo":{s.selector.startsWith(":doodle")&&(s.selector=s.selector.replace(/^\:+doodle/,":host"));let a=Bt(s.selector);a&&(s.skip=!0),S(s.selector).forEach(l=>{let u=s.styles.map(f=>this.compose_rule(f,t,l)),o=a?l:this.compose_selector(t,l);this.add_rule(o,u)});break}case"cond":{let a=s.name.substr(1),l=Cr[a],u=[];if(l){let o=s.segments.find(c=>c.arguments);o&&o.arguments&&(u=o.arguments.map(c=>this.compose_argument(c,t)));let f=this.apply_func(l,t,u,a);s.segments&&s.segments[0]&&s.segments[0].keyword==="not"&&(f=!f),f&&(f.selector?s.styles.forEach(c=>{c.type==="rule"&&this.add_rule(f.selector.replaceAll("$",this.compose_selector(t)),this.compose_rule(c,t)),c.type==="pseudo"&&c.selector.split(",").forEach(p=>{let m=c.styles.map(h=>this.compose_rule(h,t,p));this.add_rule((f.selector+p).replaceAll("$",this.compose_selector(t)),m)})}):this.compose(t,s.styles))}else{let o=s.name+" "+s.segments.map(c=>c.keyword?c.keyword:Array.isArray(c.arguments)?"("+c.arguments[0][0].value+")":"").join(" "),f="";s.styles.forEach(c=>{c.type==="rule"&&(f+=`${o} {${this.compose_rule(c,t)}}`),c.type==="pseudo"&&c.name.split(",").forEach(p=>{let m=c.styles.map(h=>this.compose_rule(h,t,p));f+=`${(cond.selector+p).replaceAll("$",this.compose_selector(t))} {${m}}`})}),this.add_rule(this.compose_selector(t),f)}break}case"keyframes":this.keyframes[s.name]||(this.keyframes[s.name]=a=>`${be(s.steps.map(l=>`${this.get_composed_value(l.name,a).value} {${be(l.styles.map(u=>this.compose_rule(u,a)))}}`))}`)}})}output(){for(let[a,l]of Object.entries(this.rules))if(st(a)){let u=a.replace(/^:container\(?/,"grid").replace(/\)?$/,"");this.styles.container+=`${u} {${be(l)}}`}else{let u=q(a)?"host":"cells",o=be(l).trim();if(o.length){let f=u==="host"?`${a},.host`:a;this.styles[u]+=`${f} {${o}}`}}if(this.uniforms.time){let a="animation-name",l=M.ticks,u=M.name,o=B.name;this.styles.container+=`:host,.host {animation:${M.animation()},${B.animation(_s+"ms")};}`,this.styles.keyframes+=`@keyframes ${M[a]} {from {--${u}:0} to {--${u}:${l}}} @keyframes ${B[a]} {from {--${o}:0} to {--${o}:${l}}}`}this.coords.forEach((a,l)=>{for(let[u,o]of Object.entries(this.keyframes)){let f=this.compose_aname(u,a.count);this.styles.keyframes+=`${l===0?`@keyframes ${u} {${o(a)}}`:""} @keyframes ${f} {${o(a)}}`}});let{keyframes:t,host:r,container:i,cells:s}=this.styles,n=t+r+i;return{props:this.props,styles:{main:n,cells:s,all:n+s},grid:this.grid,seed:this.seed,random:this.random,doodles:this.doodles,shaders:this.shaders,pattern:this.pattern,uniforms:this.uniforms,content:this.content}}};function xs(e){return e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'")?e.substring(1,e.length-1):e}function nt(e,t,r,i,s,n=[]){let a=new Lt(e),l=s||Le(String(r)),u={};function o(d){l=Le(String(d))}function f(d=0,v=1){return arguments.length==1&&([d,v]=[0,d]),qe(l(),d,v)}function c(...d){let v=d.reduce((g,_)=>g.concat(_),[]);return v[~~(l()*v.length)]}function p(d){let v=[...d],g=d.length;for(;g;){let _=~~(l()*g--),$=v[g];v[g]=v[_],v[_]=$}return v}a.pre_compose({x:1,y:1,z:1,count:1,context:{},grid:{x:1,y:1,z:1,count:1},random:l,rand:f,pick:c,shuffle:p,max_grid:i,update_random:o,seed_value:r,rules:a,upextra:n});let{grid:m,seed:h}=a.output();if(m&&(t=m),h?(h=String(h),l=Le(h)):h=r,w(h)&&(h=Date.now(),l=Le(h)),h=String(h),a.seed=h,a.random=l,a.reset(),t.z==1)for(let d=1,v=0;d<=t.y;++d)for(let g=1;g<=t.x;++g)a.compose({x:g,y:d,z:1,count:++v,grid:t,context:u,rand:f,pick:c,shuffle:p,random:l,seed:h,max_grid:i,upextra:n,rules:a});else for(let d=1,v=0;d<=t.z;++d)a.compose({x:1,y:1,z:d,count:++v,grid:t,context:u,rand:f,pick:c,shuffle:p,random:l,seed:h,max_grid:i,rules:a,upextra:n});return a.output()}function Dr(e,t,r){let i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}function bs(e,t,r){let i=Dr(e,e.VERTEX_SHADER,t),s=Dr(e,e.FRAGMENT_SHADER,r),n=e.createProgram();return e.attachShader(n,i),e.attachShader(n,s),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||(console.warn("Link failed:"+e.getProgramInfoLog(n)),console.warn("vs info-log:"+e.getShaderInfoLog(i)),console.warn("fs info-log:"+e.getShaderInfoLog(s))),n}function me(e,t){return e.includes(t)?e:t+``+e}var ws=`#version 300 es
  precision highp float;out vec4 FragColor;`,$s=`#version 300 es
  in vec4 position;void main() {gl_Position = position;}`;function Ss(e,t,r){let i=e.createTexture();return e.activeTexture(e["TEXTURE"+r]),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),e.bindTexture(e.TEXTURE_2D,i),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),i}function lt(e,t){let r=O.get(e);if(r)return Promise.resolve(r);let i=document.createElement("canvas"),s=devicePixelRatio||1,n=i.width=e.width*s,a=i.height=e.height*s,l=[],u=i.getContext("webgl2",{preserveDrawingBuffer:!0});if(!u)return Promise.resolve("");let o=me(e.fragment||"","uniform vec2 u_resolution;");o=me(o,"uniform float u_time;"),o=me(o,"uniform float u_timeDelta;"),o=me(o,"uniform int u_frameIndex;"),o=me(o,"uniform vec2 u_seed;"),e.textures.forEach(N=>{let L=`uniform sampler2D ${N.name};`;o=me(o,L)});let f=/(^|[^\w\_])void\s+mainImage\(\s*out\s+vec4\s+fragColor,\s*in\s+vec2\s+fragCoord\s*\)/mg.test(o),c=["#define iResolution vec3(u_resolution, 0)","#define iTime u_time","#define iTimeDelta u_timeDelta","#define iFrame u_frameIndex",...e.textures.map((N,L)=>`#define iChannel${L} ${N.name}`)].join(``);f&&(o=`${c}${o}void main() {mainImage(FragColor, gl_FragCoord.xy);}`);let p=bs(u,e.vertex||$s,ws+o),m=u.getAttribLocation(p,"position"),h=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,h);let d=[-1,-1,-1,1,1,-1,1,1,-1,1,1,-1];u.bufferData(u.ARRAY_BUFFER,new Float32Array(d),u.STATIC_DRAW),u.enableVertexAttribArray(m),u.vertexAttribPointer(m,2,u.FLOAT,!1,0,0),u.viewport(0,0,u.drawingBufferWidth,u.drawingBufferHeight),u.clearColor(0,0,0,0),u.clear(u.COLOR_BUFFER_BIT),u.useProgram(p);let v=N=>u.getUniformLocation(p,N),g=v("u_resolution");u.uniform2fv(g,[n,a]),e.textures.forEach((N,L)=>{l.push(Ss(u,N.value,L)),u.uniform1i(u.getUniformLocation(p,N.name),L)});let _=v("u_seed");_&&u.uniform2f(_,ye(t)/1e16,Math.random());let $=v("u_time"),A=v("u_frameIndex"),k=v("u_timeDelta");if($||k||A){let N=0,L=0;return Promise.resolve(O.set(e,(ne,le,ae,G)=>(u.clear(u.COLOR_BUFFER_BIT),(e.width!==le||e.height!==ae)&&(G.forEach((Z,De)=>{u.bindTexture(u.TEXTURE_2D,l[De]),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,u.RGBA,u.UNSIGNED_BYTE,Z.value)}),e.width=le,e.height=ae,i.width=le*s,i.height=ae*s,u.viewport(0,0,i.width,i.height),u.uniform2fv(g,[i.width,i.height])),$&&u.uniform1f($,ne/1e3),A&&u.uniform1i(A,N++),k&&(u.uniform1f(k,(L-ne)/1e3),L=ne),u.drawArrays(u.TRIANGLES,0,6),i.toDataURL())))}else return u.drawArrays(u.TRIANGLES,0,6),Promise.resolve(O.set(e,i.toDataURL()))}function ks(e,t){let r=[];for(;e.next();){let{curr:i,next:s}=e.get(),n=!s||i.isSymbol(";")||s.isSymbol("}");if(r.push(i),n)break}return r.length&&(t.value=Dt(r)),t}function Wr(e,t){let r=[],i=[],s=t&&t.type||"",n=[];for(;e.next();){let{prev:a,curr:l,next:u}=e.get(),o=!u||l.isSymbol("}");if(s==="block"&&o){!u&&r.length&&!l.isSymbol("}")&&(r[r.length-1].value+=";"+l.value),t.value=r;break}else if(l.isSymbol("{")&&i.length&&!n.length){let f=js(i);if(!f.length)continue;let c=Wr(e,{type:"block",name:"unkown",value:[]});f.forEach(p=>{let m=Object.assign({},c,{name:p.name,args:p.args});r.push(m)}),i=[]}else if(l.isSymbol(":")&&i.length&&!n.length){let f=Dt(i);r.push(ks(e,{type:"statement",name:f,value:""})),s=="block"&&(t.value=r),i=[]}else l.isSymbol(";")?r.length&&i.length&&(r[r.length-1].value+=";"+Dt(i),i=[]):(l.isSymbol("(")&&n.push(l),l.isSymbol(")")&&n.pop(),i.push(l))}return r.length&&s=="block"&&(t.value=r),s?t:r}function Dt(e){return e.filter((t,r)=>!(t.isSymbol(";")&&r===e.length-1)).map(t=>t.value).join("")}function js(e){let t=j(e),r=[],i="",s=[],n=[],a=[];for(;t.next();){let{curr:l,next:u}=t.get();!i.length&&l.isWord()?i=l.value:l.isSymbol("(")?(a.length&&n.push(l.value),a.push(l)):l.isSymbol(")")?(a.pop(),a.length?n.push(l.value):n.length&&(s.push(n.join("")),n=[])):l.isSymbol(",")?a.length?(s.push(n.join("")),n=[]):(n.length&&(s.push(n.join("")),n=[]),i&&(r.push({name:i,args:s}),i="",s=[],n=[])):n.push(l.value)}return i&&r.push({name:i,args:s}),r.filter((l,u,o)=>o.findIndex(c=>c.name===l.name&&l.args.join("")==c.args.join(""))===u)}function Ns(e){let t=j(T(e));return Wr(t)}var Ur=Ns;function Es(e,{x:t,y:r}){return`vec3 mapping(vec2 uv, vec2 grid) {vec2 _grid = 1.0/grid;float x = ceil(uv.x/_grid.x);float y = ceil(grid.y - uv.y/_grid.y);float i = x + (y - 1.0) * y;return vec3(x, y, i);} vec4 getColor(float x, float y, float i, float I, float X, float Y, float t) {vec4 color = vec4(0, 0, 0, 0);${e} return color;} void main() {vec2 uv = gl_FragCoord.xy/u_resolution.xy;vec2 v = vec2(${t}, ${r});vec3 p = mapping(uv, v);FragColor = getColor(p.x, p.y, p.z, v.x * v.y, v.x, v.y, u_time);}`}function qr(e,t){if(e.name==="fill"){let{r,g:i,b:s,a:n}=t.get_rgba_color(e.value);return{type:"statement",value:`color = vec4(${at(r/255)}, ${at(i/255)}, ${at(s/255)}, ${at(n)});`}}return e.name=="grid"?{type:"grid",value:e.value}:{type:"statement",value:""}}function Ts(e,t){if(e.name==="match"){let r=e.args[0],i=[];return e.value.forEach(s=>{let n=qr(s,t);n.type=="statement"&&i.push(n.value)}),`if (${r}) {${i.join("")}}`}return""}function at(e){return String(e).includes(".")?e:e+".0"}function Wt(e,t){let r=Ur(e),i=[],s={x:1,y:1};return r.forEach(n=>{if(n.type==="statement"){let a=qr(n,t);a.type=="statement"&&i.push(a.value),a.type==="grid"&&(s=W(a.value,1/0))}else n.type==="block"&&i.push(Ts(n,t))}),Es(i.join(""),s)}function ut(e,t,r,i){return new Promise((s,n)=>{let a=`data:image/svg+xml;utf8,${encodeURIComponent(e)}`;function l(){let u=new Image;u.crossOrigin="anonymous",u.src=a,u.onload=()=>{let o=document.createElement("canvas"),f=o.getContext("2d"),c=devicePixelRatio||1;i!=1&&(c=1),o.width=t*c,o.height=r*c,f.drawImage(u,0,0,o.width,o.height);try{o.toBlob(p=>{s({blob:p,source:a,url:URL.createObjectURL(p)})})}catch(p){n(p)}}}_e()?ve(a,l,200):l()})}function As(e){let[t,r,i,s=1]=e.replace(/rgba?\((.+)\)/,(n,a)=>a).split(/,\s*/);return{r:t,g:r,b:i,a:s}}function Ut(e,t){let r=e.querySelector("style");return r?(r.style.color=t,As(getComputedStyle(r).color)):{r:0,g:0,b:0,a:1}}var Xr=16.666666666666668,Fr=1e3/1;function qt(e){let t,r=0,i=0,s=0,n=!1;function a(l){r||(r=l),e(r);let u=l-i;u<Xr&&(u=Xr),u>Fr&&(u=s||Fr),i&&(r+=u),s=u,i=l,t=requestAnimationFrame(a)}return t=requestAnimationFrame(a),{resume(){t&&n&&(n=!1,t=requestAnimationFrame(a))},pause(){t&&(cancelAnimationFrame(t),n=!0)},cancel(){t&&(n=!1,cancelAnimationFrame(t),t=null)}}}function Hr(e){if(typeof getComputedStyle>"u")return"";let t={};if(e.computedStyleMap)for(let[r,i]of e.computedStyleMap())r.startsWith("--")&&(t[r]=i[0][0]);else{let r=getComputedStyle(e);for(let i of r)i.startsWith("--")&&(t[i]=r.getPropertyValue(i))}return Ps(t)}function Yr(e,t){return typeof getComputedStyle>"u"?"":getComputedStyle(e).getPropertyValue(t).trim().replace(/^\(|\)$/g,"")}function Ps(e){let t=[];for(let[r,i]of Object.entries(e))t.push(r+":"+i);return t.join(";")}var Xt={CSSDoodle:class{},define(e,t){typeof customElements<"u"&&!customElements.get(e)&&customElements.define(e,t)}};typeof HTMLElement<"u"&&(Xt.CSSDoodle=class extends HTMLElement{constructor(){super(),this.doodle=this.attachShadow({mode:"open"}),this.animations=[],this.extra={get_variable:e=>Yr(this,e),get_rgba_color:e=>Ut(this.shadowRoot,e)}}connectedCallback(e){this.innerHTML?this.load(e):setTimeout(()=>this.load(e))}disconnectedCallback(){this.cleanup()}triggerEvent(e,t={}){return this.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0}))}_update(e){this.cleanup(),e||(e=ft(this._code)),this._code!==e&&(this._code=e),this.grid_size||(this.grid_size=this.get_grid());let{x:t,y:r,z:i}=this.grid_size,s=this.get_use(),n="",a={};this.compiled&&(n=this.compiled.content,a=this.compiled.styles);let l=this.generate(F(s+e,this.extra)),u=l.grid||this.get_grid(),{x:o,y:f,z:c}=u,p=!this.shadowRoot.innerHTML||this.shadowRoot.querySelector("css-doodle")||t!==o||r!==f||i!==c||JSON.stringify(n)!==JSON.stringify(l.content)||!a.cells||!l.styles.cells;if(Object.assign(this.grid_size,u),p)l.grid?this.build_grid(l,u):this.build_grid(this.generate(F(s+e,this.extra)),u);else{this.bind_uniforms(l.uniforms);let m=this.replace(l);l.props.has_animation&&(this.set_style(a.all.replace(/animation/g,"x")),this.reflow()),this.set_style(m(ot(this.grid_size)+l.styles.all))}setTimeout(()=>{this.triggerEvent("render"),this.triggerEvent("afterUpdate"),this.triggerEvent("update")})}update(e,t={}){if(this.triggerEvent("beforeUpdate"),!document.startViewTransition)return this._update(e);arguments.length||(e="",t={}),typeof e=="object"&&(t=e,e="");let r=this.viewTransition;r===void 0&&(r=this.hasAttribute("view-transition")),r?document.startViewTransition(()=>{this._update(e)}):this._update(e)}pause(){this.setAttribute("cssd-paused",!0);for(let e of this.animations)e.pause()}resume(){this.removeAttribute("cssd-paused");for(let e of this.animations)e.resume()}export({scale:e,name:t,download:r,detail:i}={}){return new Promise((s,n)=>{let a=Hr(this),l=this.doodle.innerHTML,{width:u,height:o}=this.getBoundingClientRect();e=parseInt(e)||1;let f=u*e,c=o*e,p=`<svg ${J} preserveAspectRatio="none" viewBox="0 0 ${u} ${o}" ${_e()?"":`width="${f}px" height="${c}px"`}><foreignObject width="100%" height="100%"><div class="host" ${wt} style="width:${u}px;height:${o}px"><style>.host{${Jt(a)}}</style>${l}</div></foreignObject></svg>`;r||i?ut(p,f,c,e).then(({source:m,url:h,blob:d})=>{if(s({width:f,height:c,svg:p,blob:d,source:m}),r){let v=document.createElement("a");v.download=Qt(t),v.href=h,v.click()}}).catch(m=>{n(m)}):s({width:f,height:c,svg:p})})}get grid(){return Object.assign({},this.grid_size)}set grid(e){this.attr("grid",e),this.connectedCallback(!0)}get seed(){return this._seed_value}set seed(e){this.attr("seed",e),this.connectedCallback(!0)}get use(){return this.attr("use")}set use(e){this.attr("use",e),this.connectedCallback(!0)}get_max_grid(){return this.hasAttribute("experimental")?256:64}get_grid(){return W(this.attr("grid"),this.get_max_grid())}get_use(){let e=String(this.attr("use")||"").trim();return/^var\(/.test(e)&&(e=`@use:${e};`),e}cleanup(){if(O.clear(),this.compiled){for(let r of this.animations)r.cancel();this.animations=[];let{pattern:e,shaders:t}=this.compiled;if(Object.keys(e).length||Object.keys(t).length)for(let r of this.shadowRoot.querySelectorAll("cell"))r.style.cssText=""}}attr(e,t){let r=arguments.length;if(r===1)return this.getAttribute(e);if(r===2)return this.setAttribute(e,t),t}generate(e){let t=this.get_grid(),r=this.attr("seed")||this.attr("data-seed");w(r)&&(r=Date.now());let i=this.compiled=nt(e,t,r,this.get_max_grid());return this._seed_value=i.seed,this._seed_random=i.random,i}doodle_to_image(e,t,r){typeof t=="function"&&(r=t,t=null),e=":doodle {width:100%;height:100%}"+e;let i=F(e,this.extra),s=W(""),n=nt(i,s,this._seed_value,this.get_max_grid(),this._seed_random,t.upextra),a=n.grid?n.grid:s,l="";if(t&&t.arg){let c=W(t.arg,1/0);c.x&&c.y&&(t.width=c.x+"px",t.height=c.y+"px",l=`viewBox="0 0 ${c.x} ${c.y}"`)}let u=this.replace(n),o=Gr(a,n.content),f=t&&t.width&&t.height?`width="${t.width}" height="${t.height}"`:"";u(`<svg ${f} ${J} preserveAspectRatio="none" ${l}><foreignObject width="100%" height="100%"><div class="host" width="100%" height="100%" ${wt}><style>@property --${M.name} {syntax:"&lt;integer&gt;";initial-value:0;inherits:true;} @property --${B.name} {syntax:"&lt;integer&gt;";initial-value:0;inherits:true;} ${ot(a)} ${n.styles.all}</style>${o}</div></foreignObject></svg>`).then(c=>{let p=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(c)))}`;_e()?f?ut(c,parseInt(t.width),parseInt(t.height),devicePixelRatio||2).then(({blob:m})=>{let h=URL.createObjectURL(m);ve(h),r(h)}):(ve(p),r(p)):r(p)})}pattern_to_image({code:e,cell:t,id:r},i){let s=Wt(e,this.extra);this.shader_to_image({shader:s,cell:t,id:r},i)}shader_to_image({shader:e,cell:t,id:r},i){let s=this.doodle.getElementById(t);if(!s)return!1;let{width:n,height:a}=s.getBoundingClientRect(),l=devicePixelRatio||1,u=this.seed,o=typeof e=="string"?hr(e):e;o.width=n,o.height=a;let f=o.textures,c=[],p=d=>{s.style.setProperty(r,`url(${d})`)},m=d=>{typeof d=="function"?this.animations.push(qt(v=>{p(d(v,n,a,c))})):p(d)},h=(d,v)=>{Promise.all(d.map(({name:g,value:_})=>new Promise($=>{this.doodle_to_image(_,{width:n,height:a},A=>{let k=new Image;k.width=n*l,k.height=n*l,k.onload=()=>$({name:g,value:k}),k.src=A})}))).then(v)};s.observer||(s.observer=new ResizeObserver(()=>{let d=s.getBoundingClientRect();n=d.width,a=d.height,h(f,v=>c=v)}),s.observer.observe(s)),f.length?h(f,d=>{o.textures=c=d,o.width=n,o.height=a,lt(o,u).then(m).then(i)}):lt(o,u).then(m).then(i)}load(e){this.cleanup();let t=this._code||this.innerHTML,r=this.get_use(),i=F(r+ft(t),this.extra),s=this.generate(i);e||this.hasAttribute("click-to-update")&&this.addEventListener("click",n=>this.update()),this.grid_size=s.grid?s.grid:this.get_grid(),this.build_grid(s,this.grid_size),this._code=t,this.innerHTML="",setTimeout(()=>{this.triggerEvent("render")})}replace({doodles:e,shaders:t,pattern:r}){let i=Object.keys(e),s=Object.keys(t),n=Object.keys(r),a=i.length+s.length+n.length;return l=>{if(!a)return Promise.resolve(l);let u=[].concat(i.map(o=>l.includes(o)?new Promise(f=>{let{arg:c,doodle:p,upextra:m}=e[o];this.doodle_to_image(p,{arg:c,upextra:m},h=>f({id:o,value:h}))}):Promise.resolve("")),s.map(o=>l.includes(o)?new Promise(f=>{this.shader_to_image(t[o],c=>f({id:o,value:c}))}):Promise.resolve("")),n.map(o=>l.includes(o)?new Promise(f=>{this.pattern_to_image(r[o],c=>f({id:o,value:c}))}):Promise.resolve("")));return Promise.all(u).then(o=>{for(let{id:f,value:c}of o){let p=`url(${c})`;/^shader|^pattern/.test(f)&&(p=`var(--${f})`),l=l.replaceAll("${"+f+"}",p)}return l})}}reflow(){this.shadowRoot.querySelector("grid").offsetWidth}bind_uniforms({time:e,mousex:t,mousey:r,width:i,height:s}){e&&this.reg_utime(),t||r?this.reg_umouse(t,r):this.off_umouse(),i||s?this.reg_usize(i,s):this.off_usize()}build_grid(e,t){let{has_transition:r,has_animation:i}=e.props,s=r||i,{uniforms:n,content:a,styles:l}=e;this.doodle.innerHTML=`<style>${ot(t)+l.main}</style>${l.cells||Object.keys(a).length?Gr(t,a):""}`,s&&this.reflow();let u=this.replace(e);this.set_style(u(ot(t)+l.all)),this.bind_uniforms(n)}reg_umouse(e,t){if(this.umouse_fn)e||t||this.off_umouse();else{this.umouse_fn=i=>{let s=i.detail||i;(e||t)&&(this.style.setProperty("--"+Te.name,s.offsetX),this.style.setProperty("--"+Ae.name,s.offsetY))},this.addEventListener("pointermove",this.umouse_fn);let r=new CustomEvent("pointermove",{detail:{offsetX:0,offsetY:0}});this.dispatchEvent(r)}}off_umouse(){this.umouse_fn&&(this.style.removeProperty("--"+Te.name),this.style.removeProperty("--"+Ae.name),this.removeEventListener("pointermove",this.umouse_fn),this.umouse_fn=null)}reg_usize(e,t){this.usize_observer?e||t||this.off_usize():(this.usize_observer=new ResizeObserver(()=>{let r=this.getBoundingClientRect();(e||t)&&(this.style.setProperty("--"+Pe.name,r.width),this.style.setProperty("--"+Re.name,r.height))}),this.usize_observer.observe(this))}off_usize(){this.usize_observer&&(this.style.removeProperty("--"+Pe.name),this.style.removeProperty("--"+Re.name),this.usize_observer.unobserve(this),this.usize_observer=null)}reg_utime(){if(!this.is_utime_set){try{CSS.registerProperty({name:"--"+M.name,syntax:"<integer>",initialValue:0,inherits:!0}),CSS.registerProperty({name:"--"+B.name,syntax:"<integer>",initialValue:0,inherits:!0})}catch{}this.is_utime_set=!0}}set_style(e){if(e instanceof Promise)e.then(t=>{this.set_style(t)});else{let t=this.shadowRoot.querySelector("style");t&&(t.textContent=e.replace(/\n\s+/g," "))}}});function ot(e){let{x:t,y:r}=e||{};return`*,*::after,*::before,:host,.host {box-sizing:border-box;}:host,.host {display:block;visibility:visible;width:auto;height:auto;contain:strict;view-transition-name:css-doodle;--${M.name}:0;--${B.name}:0}:host([hidden]),[hidden] {display:none}:host([cssd-paused]),:host([cssd-paused]) * {animation-play-state:paused !important} grid, cell {display:grid;position:relative;} grid {gap:inherit;grid-template:repeat(${r},1fr)/repeat(${t},1fr)} cell {place-items:center} svg {position:absolute;} grid, svg {width:100%;height:100%}`}function Vr(e,t,r,i,s=""){let n=X(e,t,r),a=i["#"+n]??"";return`<cell id="${n}" part="cell">${a}${s??""}</cell>`}function Gr(e,t){let{x:r,y:i,z:s}=e||{},n="";if(s==1)for(let a=1;a<=i;++a)for(let l=1;l<=r;++l)n+=Vr(l,a,1,t);else{let a="";for(let l=s;l>=1;l--)a=Vr(1,1,l,t,a);n=a}return`<grid part="grid">${n}</grid>`}var Zr=Xt.CSSDoodle,Kr=Xt.define;Kr("css-doodle",Zr);})();